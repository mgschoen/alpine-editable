(()=>{var js=Object.create;var Cn=Object.defineProperty;var Vs=Object.getOwnPropertyDescriptor;var qs=Object.getOwnPropertyNames;var zs=Object.getPrototypeOf,$s=Object.prototype.hasOwnProperty;var bn=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),vi=(r,e)=>{for(var t in e)Cn(r,t,{get:e[t],enumerable:!0})},Us=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of qs(e))!$s.call(r,i)&&i!==t&&Cn(r,i,{get:()=>e[i],enumerable:!(n=Vs(e,i))||n.enumerable});return r};var st=(r,e,t)=>(t=r!=null?js(zs(r)):{},Us(e||!r||!r.__esModule?Cn(t,"default",{value:r,enumerable:!0}):t,r));var lt=bn((Sn,xn)=>{(function(r,e){typeof define=="function"&&define.amd?define(r):typeof xn<"u"&&typeof Sn=="object"?xn.exports=r():e.rangy=r()})(function(){var r="object",e="function",t="undefined",n=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],i=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],u=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],p=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function o(v,T){var R=typeof v[T];return R==e||!!(R==r&&v[T])||R=="unknown"}function c(v,T){return!!(typeof v[T]==r&&v[T])}function d(v,T){return typeof v[T]!=t}function W(v){return function(T,R){for(var D=R.length;D--;)if(!v(T,R[D]))return!1;return!0}}var B=W(o),_=W(c),I=W(d);function F(v){return v&&B(v,p)&&I(v,u)}function ce(v){return c(v,"body")?v.body:v.getElementsByTagName("body")[0]}var Ee=[].forEach?function(v,T){v.forEach(T)}:function(v,T){for(var R=0,D=v.length;R<D;++R)T(v[R],R)},$e={},rt=typeof window!=t&&typeof document!=t,Je={isHostMethod:o,isHostObject:c,isHostProperty:d,areHostMethods:B,areHostObjects:_,areHostProperties:I,isTextRange:F,getBody:ce,forEach:Ee},ne={version:"1.3.1",initialized:!1,isBrowser:rt,supported:!0,util:Je,features:{},modules:$e,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==t?!0:rangyAutoInitialize}};function Ct(v){typeof console!=t&&o(console,"log")&&console.log(v)}function Ht(v,T){rt&&T?alert(v):Ct(v)}function ct(v){ne.initialized=!0,ne.supported=!1,Ht("Rangy is not supported in this environment. Reason: "+v,ne.config.alertOnFail)}ne.fail=ct;function Et(v){Ht("Rangy warning: "+v,ne.config.alertOnWarn)}ne.warn=Et;var je;({}).hasOwnProperty?(Je.extend=je=function(v,T,R){var D,j;for(var re in T)T.hasOwnProperty(re)&&(D=v[re],j=T[re],R&&D!==null&&typeof D=="object"&&j!==null&&typeof j=="object"&&je(D,j,!0),v[re]=j);return T.hasOwnProperty("toString")&&(v.toString=T.toString),v},Je.createOptions=function(v,T){var R={};return je(R,T),v&&je(R,v),R}):ct("hasOwnProperty not supported"),rt||ct("Rangy can only run in a browser"),function(){var v;if(rt){var T=document.createElement("div");T.appendChild(document.createElement("span"));var R=[].slice;try{R.call(T.childNodes,0)[0].nodeType==1&&(v=function(D){return R.call(D,0)})}catch{}}v||(v=function(D){for(var j=[],re=0,Z=D.length;re<Z;++re)j[re]=D[re];return j}),Je.toArray=v}();var ot;rt&&(o(document,"addEventListener")?ot=function(v,T,R){v.addEventListener(T,R,!1)}:o(document,"attachEvent")?ot=function(v,T,R){v.attachEvent("on"+T,R)}:ct("Document does not have required addEventListener or attachEvent method"),Je.addListener=ot);var sr=[];function zt(v){return v.message||v.description||String(v)}function ar(){if(!(!rt||ne.initialized)){var v,T=!1,R=!1;o(document,"createRange")&&(v=document.createRange(),B(v,i)&&I(v,n)&&(T=!0));var D=ce(document);if(!D||D.nodeName.toLowerCase()!="body"){ct("No body element found");return}if(D&&o(D,"createTextRange")&&(v=D.createTextRange(),F(v)&&(R=!0)),!T&&!R){ct("Neither Range nor TextRange are available");return}ne.initialized=!0,ne.features={implementsDomRange:T,implementsTextRange:R};var j,re;for(var Z in $e)(j=$e[Z])instanceof bt&&j.init(j,ne);for(var we=0,ke=sr.length;we<ke;++we)try{sr[we](ne)}catch(Ie){re="Rangy init listener threw an exception. Continuing. Detail: "+zt(Ie),Ct(re)}}}function Lr(v,T,R){R&&(v+=" in module "+R.name),ne.warn("DEPRECATED: "+v+" is deprecated. Please use "+T+" instead.")}function Fr(v,T,R,D){v[T]=function(){return Lr(T,R,D),v[R].apply(v,Je.toArray(arguments))}}Je.deprecationNotice=Lr,Je.createAliasForDeprecatedMethod=Fr,ne.init=ar,ne.addInitListener=function(v){ne.initialized?v(ne):sr.push(v)};var cr=[];ne.addShimListener=function(v){cr.push(v)};function gn(v){v=v||window,ar();for(var T=0,R=cr.length;T<R;++T)cr[T](v)}rt&&(ne.shim=ne.createMissingNativeApi=gn,Fr(ne,"createMissingNativeApi","shim"));function bt(v,T,R){this.name=v,this.dependencies=T,this.initialized=!1,this.supported=!1,this.initializer=R}bt.prototype={init:function(){for(var v=this.dependencies||[],T=0,R=v.length,D,j;T<R;++T){if(j=v[T],D=$e[j],!D||!(D instanceof bt))throw new Error("required module '"+j+"' not found");if(D.init(),!D.supported)throw new Error("required module '"+j+"' not supported")}this.initializer(this)},fail:function(v){throw this.initialized=!0,this.supported=!1,new Error(v)},warn:function(v){ne.warn("Module "+this.name+": "+v)},deprecationNotice:function(v,T){ne.warn("DEPRECATED: "+v+" in module "+this.name+" is deprecated. Please use "+T+" instead")},createError:function(v){return new Error("Error in Rangy "+this.name+" module: "+v)}};function Tt(v,T,R){var D=new bt(v,T,function(j){if(!j.initialized){j.initialized=!0;try{R(ne,j),j.supported=!0}catch(Z){var re="Module '"+v+"' failed to load: "+zt(Z);Ct(re),Z.stack&&Ct(Z.stack)}}});return $e[v]=D,D}ne.createModule=function(v){var T,R;arguments.length==2?(T=arguments[1],R=[]):(T=arguments[2],R=arguments[1]);var D=Tt(v,R,T);ne.initialized&&ne.supported&&D.init()},ne.createCoreModule=function(v,T,R){Tt(v,T,R)};function ur(){}ne.RangePrototype=ur,ne.rangePrototype=new ur;function Dr(){}ne.selectionPrototype=new Dr,ne.createCoreModule("DomUtil",[],function(v,T){var R="undefined",D=v.util,j=D.getBody;D.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||T.fail("document missing a Node creation method"),D.isHostMethod(document,"getElementsByTagName")||T.fail("document missing getElementsByTagName method");var re=document.createElement("div");D.areHostMethods(re,["insertBefore","appendChild","cloneNode"])||T.fail("Incomplete Element implementation"),D.isHostProperty(re,"innerHTML")||T.fail("Element is missing innerHTML property");var Z=document.createTextNode("test");D.areHostMethods(Z,["splitText","deleteData","insertData","appendData","cloneNode"])||T.fail("Incomplete Text Node implementation");var we=function(C,M){for(var J=C.length;J--;)if(C[J]===M)return!0;return!1};function ke(C){var M;return typeof C.namespaceURI==R||(M=C.namespaceURI)===null||M=="http://www.w3.org/1999/xhtml"}function Ie(C){var M=C.parentNode;return M.nodeType==1?M:null}function ge(C){for(var M=0;C=C.previousSibling;)++M;return M}function De(C){switch(C.nodeType){case 7:case 10:return 0;case 3:case 8:return C.length;default:return C.childNodes.length}}function Ve(C,M){var J=[],$;for($=C;$;$=$.parentNode)J.push($);for($=M;$;$=$.parentNode)if(we(J,$))return $;return null}function ve(C,M,J){for(var $=J?M:M.parentNode;$;){if($===C)return!0;$=$.parentNode}return!1}function qe(C,M){return ve(C,M,!0)}function Se(C,M,J){for(var $,Ae=J?C:C.parentNode;Ae;){if($=Ae.parentNode,$===M)return Ae;Ae=$}return null}function ue(C){var M=C.nodeType;return M==3||M==4||M==8}function O(C){if(!C)return!1;var M=C.nodeType;return M==3||M==8}function oe(C,M){var J=M.nextSibling,$=M.parentNode;return J?$.insertBefore(C,J):$.appendChild(C),C}function V(C,M,J){var $=C.cloneNode(!1);if($.deleteData(0,M),C.deleteData(M,C.length-M),oe($,C),J)for(var Ae=0,me;me=J[Ae++];)me.node==C&&me.offset>M?(me.node=$,me.offset-=M):me.node==C.parentNode&&me.offset>ge(C)&&++me.offset;return $}function le(C){if(C.nodeType==9)return C;if(typeof C.ownerDocument!=R)return C.ownerDocument;if(typeof C.document!=R)return C.document;if(C.parentNode)return le(C.parentNode);throw T.createError("getDocument: no document found for node")}function Ne(C){var M=le(C);if(typeof M.defaultView!=R)return M.defaultView;if(typeof M.parentWindow!=R)return M.parentWindow;throw T.createError("Cannot get a window object for node")}function ie(C){if(typeof C.contentDocument!=R)return C.contentDocument;if(typeof C.contentWindow!=R)return C.contentWindow.document;throw T.createError("getIframeDocument: No Document object found for iframe element")}function ee(C){if(typeof C.contentWindow!=R)return C.contentWindow;if(typeof C.contentDocument!=R)return C.contentDocument.defaultView;throw T.createError("getIframeWindow: No Window object found for iframe element")}function be(C){return C&&D.isHostMethod(C,"setTimeout")&&D.isHostObject(C,"document")}function pe(C,M,J){var $;if(C?D.isHostProperty(C,"nodeType")?$=C.nodeType==1&&C.tagName.toLowerCase()=="iframe"?ie(C):le(C):be(C)&&($=C.document):$=document,!$)throw M.createError(J+"(): Parameter must be a Window object or DOM node");return $}function fe(C){for(var M;M=C.parentNode;)C=M;return C}function Ye(C,M,J,$){var Ae,me,Re,Ke,ze;if(C==J)return M===$?0:M<$?-1:1;if(Ae=Se(J,C,!0))return M<=ge(Ae)?-1:1;if(Ae=Se(C,J,!0))return ge(Ae)<$?-1:1;if(me=Ve(C,J),!me)throw new Error("comparePoints error: nodes have no common ancestor");if(Re=C===me?me:Se(C,me,!0),Ke=J===me?me:Se(J,me,!0),Re===Ke)throw T.createError("comparePoints got to case 4 and childA and childB are the same!");for(ze=me.firstChild;ze;){if(ze===Re)return-1;if(ze===Ke)return 1;ze=ze.nextSibling}}var L=!1;function U(C){var M;try{return M=C.parentNode,!1}catch{return!0}}(function(){var C=document.createElement("b");C.innerHTML="1";var M=C.firstChild;C.innerHTML="<br />",L=U(M),v.features.crashyTextNodes=L})();function de(C){if(!C)return"[No node]";if(L&&U(C))return"[Broken node]";if(ue(C))return'"'+C.data+'"';if(C.nodeType==1){var M=C.id?' id="'+C.id+'"':"";return"<"+C.nodeName+M+">[index:"+ge(C)+",length:"+C.childNodes.length+"]["+(C.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return C.nodeName}function ye(C){for(var M=le(C).createDocumentFragment(),J;J=C.firstChild;)M.appendChild(J);return M}var Te;typeof window.getComputedStyle!=R?Te=function(C,M){return Ne(C).getComputedStyle(C,null)[M]}:typeof document.documentElement.currentStyle!=R?Te=function(C,M){return C.currentStyle?C.currentStyle[M]:""}:T.fail("No means of obtaining computed style properties found");function Xe(C,M,J){var $=j(C),Ae=C.createElement("div");Ae.contentEditable=""+!!J,M&&(Ae.innerHTML=M);var me=$.firstChild;return me?$.insertBefore(Ae,me):$.appendChild(Ae),Ae}function Ue(C){return C.parentNode.removeChild(C)}function Le(C){this.root=C,this._next=C}Le.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var C=this._current=this._next,M,J;if(this._current)if(M=C.firstChild,M)this._next=M;else{for(J=null;C!==this.root&&!(J=C.nextSibling);)C=C.parentNode;this._next=J}return this._current},detach:function(){this._current=this._next=this.root=null}};function Fe(C){return new Le(C)}function Be(C,M){this.node=C,this.offset=M}Be.prototype={equals:function(C){return!!C&&this.node===C.node&&this.offset==C.offset},inspect:function(){return"[DomPosition("+de(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};function Ge(C){this.code=this[C],this.codeName=C,this.message="DOMException: "+this.codeName}Ge.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},Ge.prototype.toString=function(){return this.message},v.dom={arrayContains:we,isHtmlNamespace:ke,parentElement:Ie,getNodeIndex:ge,getNodeLength:De,getCommonAncestor:Ve,isAncestorOf:ve,isOrIsAncestorOf:qe,getClosestAncestorIn:Se,isCharacterDataNode:ue,isTextOrCommentNode:O,insertAfter:oe,splitDataNode:V,getDocument:le,getWindow:Ne,getIframeWindow:ee,getIframeDocument:ie,getBody:j,isWindow:be,getContentDocument:pe,getRootContainer:fe,comparePoints:Ye,isBrokenNode:U,inspectNode:de,getComputedStyleProperty:Te,createTestElement:Xe,removeNode:Ue,fragmentFromNodeChildren:ye,createIterator:Fe,DomPosition:Be},v.DOMException=Ge}),ne.createCoreModule("DomRange",["DomUtil"],function(v,T){var R=v.dom,D=v.util,j=R.DomPosition,re=v.DOMException,Z=R.isCharacterDataNode,we=R.getNodeIndex,ke=R.isOrIsAncestorOf,Ie=R.getDocument,ge=R.comparePoints,De=R.splitDataNode,Ve=R.getClosestAncestorIn,ve=R.getNodeLength,qe=R.arrayContains,Se=R.getRootContainer,ue=v.features.crashyTextNodes,O=R.removeNode;function oe(a,m){return a.nodeType!=3&&(ke(a,m.startContainer)||ke(a,m.endContainer))}function V(a){return a.document||Ie(a.startContainer)}function le(a){return Se(a.startContainer)}function Ne(a){return new j(a.parentNode,we(a))}function ie(a){return new j(a.parentNode,we(a)+1)}function ee(a,m,N){var k=a.nodeType==11?a.firstChild:a;return Z(m)?N==m.length?R.insertAfter(a,m):m.parentNode.insertBefore(a,N==0?m:De(m,N)):N>=m.childNodes.length?m.appendChild(a):m.insertBefore(a,m.childNodes[N]),k}function be(a,m,N){if(f(a),f(m),V(m)!=V(a))throw new re("WRONG_DOCUMENT_ERR");var k=ge(a.startContainer,a.startOffset,m.endContainer,m.endOffset),z=ge(a.endContainer,a.endOffset,m.startContainer,m.startOffset);return N?k<=0&&z>=0:k<0&&z>0}function pe(a){for(var m,N,k=V(a.range).createDocumentFragment(),z;N=a.next();){if(m=a.isPartiallySelectedSubtree(),N=N.cloneNode(!m),m&&(z=a.getSubtreeIterator(),N.appendChild(pe(z)),z.detach()),N.nodeType==10)throw new re("HIERARCHY_REQUEST_ERR");k.appendChild(N)}return k}function fe(a,m,N){var k,z;N=N||{stop:!1};for(var ae,A;ae=a.next();)if(a.isPartiallySelectedSubtree()){if(m(ae)===!1){N.stop=!0;return}else if(A=a.getSubtreeIterator(),fe(A,m,N),A.detach(),N.stop)return}else for(k=R.createIterator(ae);z=k.next();)if(m(z)===!1){N.stop=!0;return}}function Ye(a){for(var m;a.next();)a.isPartiallySelectedSubtree()?(m=a.getSubtreeIterator(),Ye(m),m.detach()):a.remove()}function L(a){for(var m,N=V(a.range).createDocumentFragment(),k;m=a.next();){if(a.isPartiallySelectedSubtree()?(m=m.cloneNode(!1),k=a.getSubtreeIterator(),m.appendChild(L(k)),k.detach()):a.remove(),m.nodeType==10)throw new re("HIERARCHY_REQUEST_ERR");N.appendChild(m)}return N}function U(a,m,N){var k=!!(m&&m.length),z,ae=!!N;k&&(z=new RegExp("^("+m.join("|")+")$"));var A=[];return fe(new ye(a,!1),function(H){if(!(k&&!z.test(H.nodeType))&&!(ae&&!N(H))){var Y=a.startContainer;if(!(H==Y&&Z(Y)&&a.startOffset==Y.length)){var se=a.endContainer;H==se&&Z(se)&&a.endOffset==0||A.push(H)}}}),A}function de(a){var m=typeof a.getName>"u"?"Range":a.getName();return"["+m+"("+R.inspectNode(a.startContainer)+":"+a.startOffset+", "+R.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function ye(a,m){if(this.range=a,this.clonePartiallySelectedTextNodes=m,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var N=a.commonAncestorContainer;this.sc===this.ec&&Z(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===N&&!Z(this.sc)?this.sc.childNodes[this.so]:Ve(this.sc,N,!0),this._last=this.ec===N&&!Z(this.ec)?this.ec.childNodes[this.eo-1]:Ve(this.ec,N,!0))}}ye.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,Z(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a=this._current,m,N;Z(a)&&(a===this.sc||a===this.ec)?(m=a===this.sc?this.so:0,N=a===this.ec?this.eo:a.length,m!=N&&a.deleteData(m,N-m)):a.parentNode&&O(a)},isPartiallySelectedSubtree:function(){var a=this._current;return oe(a,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse(!1);else{a=new We(V(this.range));var m=this._current,N=m,k=0,z=m,ae=ve(m);ke(m,this.sc)&&(N=this.sc,k=this.so),ke(m,this.ec)&&(z=this.ec,ae=this.eo),he(a,N,k,z,ae)}return new ye(a,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Te=[1,3,4,5,7,8,10],Xe=[2,9,11],Ue=[5,6,10,12],Le=[1,3,4,5,7,8,10,11],Fe=[1,3,4,5,7,8];function Be(a){return function(m,N){for(var k,z=N?m:m.parentNode;z;){if(k=z.nodeType,qe(a,k))return z;z=z.parentNode}return null}}var Ge=Be([9,11]),C=Be(Ue),M=Be([6,10,12]),J=Be([1]);function $(a,m){if(M(a,m))throw new re("INVALID_NODE_TYPE_ERR")}function Ae(a,m){if(!qe(m,a.nodeType))throw new re("INVALID_NODE_TYPE_ERR")}function me(a,m){if(m<0||m>(Z(a)?a.length:a.childNodes.length))throw new re("INDEX_SIZE_ERR")}function Re(a,m){if(Ge(a,!0)!==Ge(m,!0))throw new re("WRONG_DOCUMENT_ERR")}function Ke(a){if(C(a,!0))throw new re("NO_MODIFICATION_ALLOWED_ERR")}function ze(a,m){if(!a)throw new re(m)}function St(a,m){return m<=(Z(a)?a.length:a.childNodes.length)}function l(a){return!!a.startContainer&&!!a.endContainer&&!(ue&&(R.isBrokenNode(a.startContainer)||R.isBrokenNode(a.endContainer)))&&Se(a.startContainer)==Se(a.endContainer)&&St(a.startContainer,a.startOffset)&&St(a.endContainer,a.endOffset)}function f(a){if(!l(a))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+a.inspect()+")")}var h=document.createElement("style"),y=!1;try{h.innerHTML="<b>x</b>",y=h.firstChild.nodeType==3}catch{}v.features.htmlParsingConforms=y;var b=y?function(a){var m=this.startContainer,N=Ie(m);if(!m)throw new re("INVALID_STATE_ERR");var k=null;return m.nodeType==1?k=m:Z(m)&&(k=R.parentElement(m)),k===null||k.nodeName=="HTML"&&R.isHtmlNamespace(Ie(k).documentElement)&&R.isHtmlNamespace(k)?k=N.createElement("body"):k=k.cloneNode(!1),k.innerHTML=a,R.fragmentFromNodeChildren(k)}:function(a){var m=V(this),N=m.createElement("body");return N.innerHTML=a,R.fragmentFromNodeChildren(N)};function S(a,m){f(a);var N=a.startContainer,k=a.startOffset,z=a.endContainer,ae=a.endOffset,A=N===z;Z(z)&&ae>0&&ae<z.length&&De(z,ae,m),Z(N)&&k>0&&k<N.length&&(N=De(N,k,m),A?(ae-=k,z=N):z==N.parentNode&&ae>=we(N)&&ae++,k=0),a.setStartAndEnd(N,k,z,ae)}function x(a){f(a);var m=a.commonAncestorContainer.parentNode.cloneNode(!1);return m.appendChild(a.cloneContents()),m.innerHTML}var E=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],G=0,q=1,te=2,Q=3,Oe=0,Ce=1,Me=2,He=3;D.extend(v.rangePrototype,{compareBoundaryPoints:function(a,m){f(this),Re(this.startContainer,m.startContainer);var N,k,z,ae,A=a==Q||a==G?"start":"end",H=a==q||a==G?"start":"end";return N=this[A+"Container"],k=this[A+"Offset"],z=m[H+"Container"],ae=m[H+"Offset"],ge(N,k,z,ae)},insertNode:function(a){if(f(this),Ae(a,Le),Ke(this.startContainer),ke(a,this.startContainer))throw new re("HIERARCHY_REQUEST_ERR");var m=ee(a,this.startContainer,this.startOffset);this.setStartBefore(m)},cloneContents:function(){f(this);var a,m;if(this.collapsed)return V(this).createDocumentFragment();if(this.startContainer===this.endContainer&&Z(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),m=V(this).createDocumentFragment(),m.appendChild(a),m;var N=new ye(this,!0);return a=pe(N),N.detach(),a},canSurroundContents:function(){f(this),Ke(this.startContainer),Ke(this.endContainer);var a=new ye(this,!0),m=a._first&&oe(a._first,this)||a._last&&oe(a._last,this);return a.detach(),!m},surroundContents:function(a){if(Ae(a,Fe),!this.canSurroundContents())throw new re("INVALID_STATE_ERR");var m=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);ee(a,this.startContainer,this.startOffset),a.appendChild(m),this.selectNode(a)},cloneRange:function(){f(this);for(var a=new We(V(this)),m=E.length,N;m--;)N=E[m],a[N]=this[N];return a},toString:function(){f(this);var a=this.startContainer;if(a===this.endContainer&&Z(a))return a.nodeType==3||a.nodeType==4?a.data.slice(this.startOffset,this.endOffset):"";var m=[],N=new ye(this,!0);return fe(N,function(k){(k.nodeType==3||k.nodeType==4)&&m.push(k.data)}),N.detach(),m.join("")},compareNode:function(a){f(this);var m=a.parentNode,N=we(a);if(!m)throw new re("NOT_FOUND_ERR");var k=this.comparePoint(m,N),z=this.comparePoint(m,N+1);return k<0?z>0?Me:Oe:z>0?Ce:He},comparePoint:function(a,m){return f(this),ze(a,"HIERARCHY_REQUEST_ERR"),Re(a,this.startContainer),ge(a,m,this.startContainer,this.startOffset)<0?-1:ge(a,m,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:b,toHtml:function(){return x(this)},intersectsNode:function(a,m){if(f(this),Se(a)!=le(this))return!1;var N=a.parentNode,k=we(a);if(!N)return!0;var z=ge(N,k,this.endContainer,this.endOffset),ae=ge(N,k+1,this.startContainer,this.startOffset);return m?z<=0&&ae>=0:z<0&&ae>0},isPointInRange:function(a,m){return f(this),ze(a,"HIERARCHY_REQUEST_ERR"),Re(a,this.startContainer),ge(a,m,this.startContainer,this.startOffset)>=0&&ge(a,m,this.endContainer,this.endOffset)<=0},intersectsRange:function(a){return be(this,a,!1)},intersectsOrTouchesRange:function(a){return be(this,a,!0)},intersection:function(a){if(this.intersectsRange(a)){var m=ge(this.startContainer,this.startOffset,a.startContainer,a.startOffset),N=ge(this.endContainer,this.endOffset,a.endContainer,a.endOffset),k=this.cloneRange();return m==-1&&k.setStart(a.startContainer,a.startOffset),N==1&&k.setEnd(a.endContainer,a.endOffset),k}return null},union:function(a){if(this.intersectsOrTouchesRange(a)){var m=this.cloneRange();return ge(a.startContainer,a.startOffset,this.startContainer,this.startOffset)==-1&&m.setStart(a.startContainer,a.startOffset),ge(a.endContainer,a.endOffset,this.endContainer,this.endOffset)==1&&m.setEnd(a.endContainer,a.endOffset),m}else throw new re("Ranges do not intersect")},containsNode:function(a,m){return m?this.intersectsNode(a,!1):this.compareNode(a)==He},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,ve(a))<=0},containsRange:function(a){var m=this.intersection(a);return m!==null&&a.equals(m)},containsNodeText:function(a){var m=this.cloneRange();m.selectNode(a);var N=m.getNodes([3]);if(N.length>0){m.setStart(N[0],0);var k=N.pop();return m.setEnd(k,k.length),this.containsRange(m)}else return this.containsNodeContents(a)},getNodes:function(a,m){return f(this),U(this,a,m)},getDocument:function(){return V(this)},collapseBefore:function(a){this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){this.setStartAfter(a),this.collapse(!0)},getBookmark:function(a){var m=V(this),N=v.createRange(m);a=a||R.getBody(m),N.selectNodeContents(a);var k=this.intersection(N),z=0,ae=0;return k&&(N.setEnd(k.startContainer,k.startOffset),z=N.toString().length,ae=z+k.toString().length),{start:z,end:ae,containerNode:a}},moveToBookmark:function(a){var m=a.containerNode,N=0;this.setStart(m,0),this.collapse(!0);for(var k=[m],z,ae=!1,A=!1,H,Y,se;!A&&(z=k.pop());)if(z.nodeType==3)H=N+z.length,!ae&&a.start>=N&&a.start<=H&&(this.setStart(z,a.start-N),ae=!0),ae&&a.end>=N&&a.end<=H&&(this.setEnd(z,a.end-N),A=!0),N=H;else for(se=z.childNodes,Y=se.length;Y--;)k.push(se[Y])},getName:function(){return"DomRange"},equals:function(a){return We.rangesEqual(this,a)},isValid:function(){return l(this)},inspect:function(){return de(this)},detach:function(){}});function s(a){a.START_TO_START=G,a.START_TO_END=q,a.END_TO_END=te,a.END_TO_START=Q,a.NODE_BEFORE=Oe,a.NODE_AFTER=Ce,a.NODE_BEFORE_AND_AFTER=Me,a.NODE_INSIDE=He}function g(a){s(a),s(a.prototype)}function w(a,m){return function(){f(this);var N=this.startContainer,k=this.startOffset,z=this.commonAncestorContainer,ae=new ye(this,!0),A,H;N!==z&&(A=Ve(N,z,!0),H=ie(A),N=H.node,k=H.offset),fe(ae,Ke),ae.reset();var Y=a(ae);return ae.detach(),m(this,N,k,N,k),Y}}function P(a,m){function N(A,H){return function(Y){Ae(Y,Te),Ae(Se(Y),Xe);var se=(A?Ne:ie)(Y);(H?k:z)(this,se.node,se.offset)}}function k(A,H,Y){var se=A.endContainer,Ze=A.endOffset;(H!==A.startContainer||Y!==A.startOffset)&&((Se(H)!=Se(se)||ge(H,Y,se,Ze)==1)&&(se=H,Ze=Y),m(A,H,Y,se,Ze))}function z(A,H,Y){var se=A.startContainer,Ze=A.startOffset;(H!==A.endContainer||Y!==A.endOffset)&&((Se(H)!=Se(se)||ge(H,Y,se,Ze)==-1)&&(se=H,Ze=Y),m(A,se,Ze,H,Y))}var ae=function(){};ae.prototype=v.rangePrototype,a.prototype=new ae,D.extend(a.prototype,{setStart:function(A,H){$(A,!0),me(A,H),k(this,A,H)},setEnd:function(A,H){$(A,!0),me(A,H),z(this,A,H)},setStartAndEnd:function(){var A=arguments,H=A[0],Y=A[1],se=H,Ze=Y;switch(A.length){case 3:Ze=A[2];break;case 4:se=A[2],Ze=A[3];break}$(H,!0),me(H,Y),$(se,!0),me(se,Ze),m(this,H,Y,se,Ze)},setBoundary:function(A,H,Y){this["set"+(Y?"Start":"End")](A,H)},setStartBefore:N(!0,!0),setStartAfter:N(!1,!0),setEndBefore:N(!0,!1),setEndAfter:N(!1,!1),collapse:function(A){f(this),A?m(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):m(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(A){$(A,!0),m(this,A,0,A,ve(A))},selectNode:function(A){$(A,!1),Ae(A,Te);var H=Ne(A),Y=ie(A);m(this,H.node,H.offset,Y.node,Y.offset)},extractContents:w(L,m),deleteContents:w(Ye,m),canSurroundContents:function(){f(this),Ke(this.startContainer),Ke(this.endContainer);var A=new ye(this,!0),H=A._first&&oe(A._first,this)||A._last&&oe(A._last,this);return A.detach(),!H},splitBoundaries:function(){S(this)},splitBoundariesPreservingPositions:function(A){S(this,A)},normalizeBoundaries:function(){f(this);var A=this.startContainer,H=this.startOffset,Y=this.endContainer,se=this.endOffset,Ze=function(et){var ut=et.nextSibling;ut&&ut.nodeType==et.nodeType&&(Y=et,se=et.length,et.appendData(ut.data),O(ut))},gi=function(et){var ut=et.previousSibling;if(ut&&ut.nodeType==et.nodeType){A=et;var Hs=et.length;if(H=ut.length,et.insertData(0,ut.data),O(ut),A==Y)se+=H,Y=A;else if(Y==et.parentNode){var mi=we(et);se==mi?(Y=et,se=Hs):se>mi&&se--}}},mn=!0,nt;if(Z(Y))se==Y.length?Ze(Y):se==0&&(nt=Y.previousSibling,nt&&nt.nodeType==Y.nodeType&&(se=nt.length,A==Y&&(mn=!1),nt.appendData(Y.data),O(Y),Y=nt));else{if(se>0){var vn=Y.childNodes[se-1];vn&&Z(vn)&&Ze(vn)}mn=!this.collapsed}if(mn){if(Z(A))H==0?gi(A):H==A.length&&(nt=A.nextSibling,nt&&nt.nodeType==A.nodeType&&(Y==nt&&(Y=A,se+=A.length),A.appendData(nt.data),O(nt)));else if(H<A.childNodes.length){var yn=A.childNodes[H];yn&&Z(yn)&&gi(yn)}}else A=Y,H=se;m(this,A,H,Y,se)},collapseToPoint:function(A,H){$(A,!0),me(A,H),this.setStartAndEnd(A,H)},parentElement:function(){f(this);var A=this.commonAncestorContainer;return A?J(this.commonAncestorContainer,!0):null}}),g(a)}function X(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:R.getCommonAncestor(a.startContainer,a.endContainer)}function he(a,m,N,k,z){a.startContainer=m,a.startOffset=N,a.endContainer=k,a.endOffset=z,a.document=R.getDocument(m),X(a)}function We(a){he(this,a,0,a,0)}P(We,he),D.extend(We,{rangeProperties:E,RangeIterator:ye,copyComparisonConstants:g,createPrototypeRange:P,inspect:de,toHtml:x,getRangeDocument:V,rangesEqual:function(a,m){return a.startContainer===m.startContainer&&a.startOffset===m.startOffset&&a.endContainer===m.endContainer&&a.endOffset===m.endOffset}}),v.DomRange=We}),ne.createCoreModule("WrappedRange",["DomRange"],function(v,T){var R,D,j=v.dom,re=v.util,Z=j.DomPosition,we=v.DomRange,ke=j.getBody,Ie=j.getContentDocument,ge=j.isCharacterDataNode;if(v.features.implementsDomRange&&function(){var O,oe=we.rangeProperties;function V(L){for(var U=oe.length,de;U--;)de=oe[U],L[de]=L.nativeRange[de];L.collapsed=L.startContainer===L.endContainer&&L.startOffset===L.endOffset}function le(L,U,de,ye,Te){var Xe=L.startContainer!==U||L.startOffset!=de,Ue=L.endContainer!==ye||L.endOffset!=Te,Le=!L.equals(L.nativeRange);(Xe||Ue||Le)&&(L.setEnd(ye,Te),L.setStart(U,de))}var Ne;R=function(L){if(!L)throw T.createError("WrappedRange: Range must be specified");this.nativeRange=L,V(this)},we.createPrototypeRange(R,le),O=R.prototype,O.selectNode=function(L){this.nativeRange.selectNode(L),V(this)},O.cloneContents=function(){return this.nativeRange.cloneContents()},O.surroundContents=function(L){this.nativeRange.surroundContents(L),V(this)},O.collapse=function(L){this.nativeRange.collapse(L),V(this)},O.cloneRange=function(){return new R(this.nativeRange.cloneRange())},O.refresh=function(){V(this)},O.toString=function(){return this.nativeRange.toString()};var ie=document.createTextNode("test");ke(document).appendChild(ie);var ee=document.createRange();ee.setStart(ie,0),ee.setEnd(ie,0);try{ee.setStart(ie,1),O.setStart=function(L,U){this.nativeRange.setStart(L,U),V(this)},O.setEnd=function(L,U){this.nativeRange.setEnd(L,U),V(this)},Ne=function(L){return function(U){this.nativeRange[L](U),V(this)}}}catch{O.setStart=function(U,de){try{this.nativeRange.setStart(U,de)}catch{this.nativeRange.setEnd(U,de),this.nativeRange.setStart(U,de)}V(this)},O.setEnd=function(U,de){try{this.nativeRange.setEnd(U,de)}catch{this.nativeRange.setStart(U,de),this.nativeRange.setEnd(U,de)}V(this)},Ne=function(U,de){return function(ye){try{this.nativeRange[U](ye)}catch{this.nativeRange[de](ye),this.nativeRange[U](ye)}V(this)}}}O.setStartBefore=Ne("setStartBefore","setEndBefore"),O.setStartAfter=Ne("setStartAfter","setEndAfter"),O.setEndBefore=Ne("setEndBefore","setStartBefore"),O.setEndAfter=Ne("setEndAfter","setStartAfter"),O.selectNodeContents=function(L){this.setStartAndEnd(L,0,j.getNodeLength(L))},ee.selectNodeContents(ie),ee.setEnd(ie,3);var be=document.createRange();be.selectNodeContents(ie),be.setEnd(ie,4),be.setStart(ie,2),ee.compareBoundaryPoints(ee.START_TO_END,be)==-1&&ee.compareBoundaryPoints(ee.END_TO_START,be)==1?O.compareBoundaryPoints=function(L,U){return U=U.nativeRange||U,L==U.START_TO_END?L=U.END_TO_START:L==U.END_TO_START&&(L=U.START_TO_END),this.nativeRange.compareBoundaryPoints(L,U)}:O.compareBoundaryPoints=function(L,U){return this.nativeRange.compareBoundaryPoints(L,U.nativeRange||U)};var pe=document.createElement("div");pe.innerHTML="123";var fe=pe.firstChild,Ye=ke(document);Ye.appendChild(pe),ee.setStart(fe,1),ee.setEnd(fe,2),ee.deleteContents(),fe.data=="13"&&(O.deleteContents=function(){this.nativeRange.deleteContents(),V(this)},O.extractContents=function(){var L=this.nativeRange.extractContents();return V(this),L}),Ye.removeChild(pe),Ye=null,re.isHostMethod(ee,"createContextualFragment")&&(O.createContextualFragment=function(L){return this.nativeRange.createContextualFragment(L)}),ke(document).removeChild(ie),O.getName=function(){return"WrappedRange"},v.WrappedRange=R,v.createNativeRange=function(L){return L=Ie(L,T,"createNativeRange"),L.createRange()}}(),v.features.implementsTextRange){var De=function(O){var oe=O.parentElement(),V=O.duplicate();V.collapse(!0);var le=V.parentElement();V=O.duplicate(),V.collapse(!1);var Ne=V.parentElement(),ie=le==Ne?le:j.getCommonAncestor(le,Ne);return ie==oe?ie:j.getCommonAncestor(oe,ie)},Ve=function(O){return O.compareEndPoints("StartToEnd",O)==0},ve=function(O,oe,V,le,Ne){var ie=O.duplicate();ie.collapse(V);var ee=ie.parentElement();if(j.isOrIsAncestorOf(oe,ee)||(ee=oe),!ee.canHaveHTML){var be=new Z(ee.parentNode,j.getNodeIndex(ee));return{boundaryPosition:be,nodeInfo:{nodeIndex:be.offset,containerElement:be.node}}}var pe=j.getDocument(ee).createElement("span");pe.parentNode&&j.removeNode(pe);for(var fe,Ye=V?"StartToStart":"StartToEnd",L,U,de,ye,Te=Ne&&Ne.containerElement==ee?Ne.nodeIndex:0,Xe=ee.childNodes.length,Ue=Xe,Le=Ue;Le==Xe?ee.appendChild(pe):ee.insertBefore(pe,ee.childNodes[Le]),ie.moveToElementText(pe),fe=ie.compareEndPoints(Ye,O),!(fe==0||Te==Ue);){if(fe==-1){if(Ue==Te+1)break;Te=Le}else Ue=Ue==Te+1?Te:Le;Le=Math.floor((Te+Ue)/2),ee.removeChild(pe)}if(ye=pe.nextSibling,fe==-1&&ye&&ge(ye)){ie.setEndPoint(V?"EndToStart":"EndToEnd",O);var Fe;if(/[\r\n]/.test(ye.data)){var Be=ie.duplicate(),Ge=Be.text.replace(/\r\n/g,"\r").length;for(Fe=Be.moveStart("character",Ge);(fe=Be.compareEndPoints("StartToEnd",Be))==-1;)Fe++,Be.moveStart("character",1)}else Fe=ie.text.length;de=new Z(ye,Fe)}else L=(le||!V)&&pe.previousSibling,U=(le||V)&&pe.nextSibling,U&&ge(U)?de=new Z(U,0):L&&ge(L)?de=new Z(L,L.data.length):de=new Z(ee,j.getNodeIndex(pe));return j.removeNode(pe),{boundaryPosition:de,nodeInfo:{nodeIndex:Le,containerElement:ee}}},qe=function(O,oe){var V,le,Ne=O.offset,ie=j.getDocument(O.node),ee,be,pe=ke(ie).createTextRange(),fe=ge(O.node);return fe?(V=O.node,le=V.parentNode):(be=O.node.childNodes,V=Ne<be.length?be[Ne]:null,le=O.node),ee=ie.createElement("span"),ee.innerHTML="&#feff;",V?le.insertBefore(ee,V):le.appendChild(ee),pe.moveToElementText(ee),pe.collapse(!oe),le.removeChild(ee),fe&&pe[oe?"moveStart":"moveEnd"]("character",Ne),pe};D=function(O){this.textRange=O,this.refresh()},D.prototype=new we(document),D.prototype.refresh=function(){var O,oe,V,le=De(this.textRange);Ve(this.textRange)?oe=O=ve(this.textRange,le,!0,!0).boundaryPosition:(V=ve(this.textRange,le,!0,!1),O=V.boundaryPosition,oe=ve(this.textRange,le,!1,!1,V.nodeInfo).boundaryPosition),this.setStart(O.node,O.offset),this.setEnd(oe.node,oe.offset)},D.prototype.getName=function(){return"WrappedTextRange"},we.copyComparisonConstants(D);var Se=function(O){if(O.collapsed)return qe(new Z(O.startContainer,O.startOffset),!0);var oe=qe(new Z(O.startContainer,O.startOffset),!0),V=qe(new Z(O.endContainer,O.endOffset),!1),le=ke(we.getRangeDocument(O)).createTextRange();return le.setEndPoint("StartToStart",oe),le.setEndPoint("EndToEnd",V),le};if(D.rangeToTextRange=Se,D.prototype.toTextRange=function(){return Se(this)},v.WrappedTextRange=D,!v.features.implementsDomRange||v.config.preferTextRange){var ue=function(O){return O("return this;")()}(Function);typeof ue.Range>"u"&&(ue.Range=D),v.createNativeRange=function(O){return O=Ie(O,T,"createNativeRange"),ke(O).createTextRange()},v.WrappedRange=D}}v.createRange=function(O){return O=Ie(O,T,"createRange"),new v.WrappedRange(v.createNativeRange(O))},v.createRangyRange=function(O){return O=Ie(O,T,"createRangyRange"),new we(O)},re.createAliasForDeprecatedMethod(v,"createIframeRange","createRange"),re.createAliasForDeprecatedMethod(v,"createIframeRangyRange","createRangyRange"),v.addShimListener(function(O){var oe=O.document;typeof oe.createRange>"u"&&(oe.createRange=function(){return v.createRange(oe)}),oe=O=null})}),ne.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(v,T){v.config.checkSelectionRanges=!0;var R="boolean",D="number",j=v.dom,re=v.util,Z=re.isHostMethod,we=v.DomRange,ke=v.WrappedRange,Ie=v.DOMException,ge=j.DomPosition,De,Ve,ve=v.features,qe="Control",Se=j.getDocument,ue=j.getBody,O=we.rangesEqual;function oe(s){return typeof s=="string"?/^backward(s)?$/i.test(s):!!s}function V(s,g){if(s){if(j.isWindow(s))return s;if(s instanceof f)return s.win;var w=j.getContentDocument(s,T,g);return j.getWindow(w)}else return window}function le(s){return V(s,"getWinSelection").getSelection()}function Ne(s){return V(s,"getDocSelection").document.selection}function ie(s){var g=!1;return s.anchorNode&&(g=j.comparePoints(s.anchorNode,s.anchorOffset,s.focusNode,s.focusOffset)==1),g}var ee=Z(window,"getSelection"),be=re.isHostObject(document,"selection");ve.implementsWinGetSelection=ee,ve.implementsDocSelection=be;var pe=be&&(!ee||v.config.preferTextRange);if(pe)De=Ne,v.isSelectionValid=function(s){var g=V(s,"isSelectionValid").document,w=g.selection;return w.type!="None"||Se(w.createRange().parentElement())==g};else if(ee)De=le,v.isSelectionValid=function(){return!0};else return T.fail("Neither document.selection or window.getSelection() detected."),!1;v.getNativeSelection=De;var fe=De();if(!fe)return T.fail("Native selection was null (possibly issue 138?)"),!1;var Ye=v.createNativeRange(document),L=ue(document),U=re.areHostProperties(fe,["anchorNode","focusNode","anchorOffset","focusOffset"]);ve.selectionHasAnchorAndFocus=U;var de=Z(fe,"extend");ve.selectionHasExtend=de;var ye=Z(fe,"setBaseAndExtent");ve.selectionHasSetBaseAndExtent=ye;var Te=typeof fe.rangeCount==D;ve.selectionHasRangeCount=Te;var Xe=!1,Ue=!0,Le=de?function(s,g){var w=we.getRangeDocument(g),P=v.createRange(w);P.collapseToPoint(g.endContainer,g.endOffset),s.addRange($(P)),s.extend(g.startContainer,g.startOffset)}:null;re.areHostMethods(fe,["addRange","getRangeAt","removeAllRanges"])&&typeof fe.rangeCount==D&&ve.implementsDomRange&&function(){var s=window.getSelection();if(s){for(var g=s.rangeCount,w=g>1,P=[],X=ie(s),he=0;he<g;++he)P[he]=s.getRangeAt(he);var We=j.createTestElement(document,"",!1),a=We.appendChild(document.createTextNode("\xA0\xA0\xA0")),m=document.createRange();if(m.setStart(a,1),m.collapse(!0),s.removeAllRanges(),s.addRange(m),Ue=s.rangeCount==1,s.removeAllRanges(),!w){var N=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(N&&parseInt(N[1])>=36)Xe=!1;else{var k=m.cloneRange();m.setStart(a,0),k.setEnd(a,3),k.setStart(a,2),s.addRange(m),s.addRange(k),Xe=s.rangeCount==2}}for(j.removeNode(We),s.removeAllRanges(),he=0;he<g;++he)he==0&&X?Le?Le(s,P[he]):(v.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),s.addRange(P[he])):s.addRange(P[he])}}(),ve.selectionSupportsMultipleRanges=Xe,ve.collapsedNonEditableSelectionsSupported=Ue;var Fe=!1,Be;L&&Z(L,"createControlRange")&&(Be=L.createControlRange(),re.areHostProperties(Be,["item","add"])&&(Fe=!0)),ve.implementsControlRange=Fe,U?Ve=function(s){return s.anchorNode===s.focusNode&&s.anchorOffset===s.focusOffset}:Ve=function(s){return s.rangeCount?s.getRangeAt(s.rangeCount-1).collapsed:!1};function Ge(s,g,w){var P=w?"end":"start",X=w?"start":"end";s.anchorNode=g[P+"Container"],s.anchorOffset=g[P+"Offset"],s.focusNode=g[X+"Container"],s.focusOffset=g[X+"Offset"]}function C(s){var g=s.nativeSelection;s.anchorNode=g.anchorNode,s.anchorOffset=g.anchorOffset,s.focusNode=g.focusNode,s.focusOffset=g.focusOffset}function M(s){s.anchorNode=s.focusNode=null,s.anchorOffset=s.focusOffset=0,s.rangeCount=0,s.isCollapsed=!0,s._ranges.length=0,J(s)}function J(s){s.type=s.rangeCount==0?"None":Ve(s)?"Caret":"Range"}function $(s){var g;return s instanceof we?(g=v.createNativeRange(s.getDocument()),g.setEnd(s.endContainer,s.endOffset),g.setStart(s.startContainer,s.startOffset)):s instanceof ke?g=s.nativeRange:ve.implementsDomRange&&s instanceof j.getWindow(s.startContainer).Range&&(g=s),g}function Ae(s){if(!s.length||s[0].nodeType!=1)return!1;for(var g=1,w=s.length;g<w;++g)if(!j.isAncestorOf(s[0],s[g]))return!1;return!0}function me(s){var g=s.getNodes();if(!Ae(g))throw T.createError("getSingleElementFromRange: range "+s.inspect()+" did not consist of a single element");return g[0]}function Re(s){return!!s&&typeof s.text<"u"}function Ke(s,g){var w=new ke(g);s._ranges=[w],Ge(s,w,!1),s.rangeCount=1,s.isCollapsed=w.collapsed,J(s)}function ze(s){if(s._ranges.length=0,s.docSelection.type=="None")M(s);else{var g=s.docSelection.createRange();if(Re(g))Ke(s,g);else{s.rangeCount=g.length;for(var w,P=Se(g.item(0)),X=0;X<s.rangeCount;++X)w=v.createRange(P),w.selectNode(g.item(X)),s._ranges.push(w);s.isCollapsed=s.rangeCount==1&&s._ranges[0].collapsed,Ge(s,s._ranges[s.rangeCount-1],!1),J(s)}}}function St(s,g){for(var w=s.docSelection.createRange(),P=me(g),X=Se(w.item(0)),he=ue(X).createControlRange(),We=0,a=w.length;We<a;++We)he.add(w.item(We));try{he.add(P)}catch{throw T.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}he.select(),ze(s)}var l;Z(fe,"getRangeAt")?l=function(s,g){try{return s.getRangeAt(g)}catch{return null}}:U&&(l=function(s){var g=Se(s.anchorNode),w=v.createRange(g);return w.setStartAndEnd(s.anchorNode,s.anchorOffset,s.focusNode,s.focusOffset),w.collapsed!==this.isCollapsed&&w.setStartAndEnd(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset),w});function f(s,g,w){this.nativeSelection=s,this.docSelection=g,this._ranges=[],this.win=w,this.refresh()}f.prototype=v.selectionPrototype;function h(s){s.win=s.anchorNode=s.focusNode=s._ranges=null,s.rangeCount=s.anchorOffset=s.focusOffset=0,s.detached=!0,J(s)}var y=[];function b(s,g){for(var w=y.length,P,X;w--;)if(P=y[w],X=P.selection,g=="deleteAll")h(X);else if(P.win==s)return g=="delete"?(y.splice(w,1),!0):X;return g=="deleteAll"&&(y.length=0),null}var S=function(s){if(s&&s instanceof f)return s.refresh(),s;s=V(s,"getNativeSelection");var g=b(s),w=De(s),P=be?Ne(s):null;return g?(g.nativeSelection=w,g.docSelection=P,g.refresh()):(g=new f(w,P,s),y.push({win:s,selection:g})),g};v.getSelection=S,re.createAliasForDeprecatedMethod(v,"getIframeSelection","getSelection");var x=f.prototype;function E(s,g){for(var w=Se(g[0].startContainer),P=ue(w).createControlRange(),X=0,he,We=g.length;X<We;++X){he=me(g[X]);try{P.add(he)}catch{throw T.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}P.select(),ze(s)}if(!pe&&U&&re.areHostMethods(fe,["removeAllRanges","addRange"])){x.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),M(this)};var G=function(s,g){Le(s.nativeSelection,g),s.refresh()};Te?x.addRange=function(s,g){if(Fe&&be&&this.docSelection.type==qe)St(this,s);else if(oe(g)&&de)G(this,s);else{var w;Xe?w=this.rangeCount:(this.removeAllRanges(),w=0);var P=$(s).cloneRange();try{this.nativeSelection.addRange(P)}catch{}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==w+1){if(v.config.checkSelectionRanges){var X=l(this.nativeSelection,this.rangeCount-1);X&&!O(X,s)&&(s=new ke(X))}this._ranges[this.rangeCount-1]=s,Ge(this,s,Q(this.nativeSelection)),this.isCollapsed=Ve(this),J(this)}else this.refresh()}}:x.addRange=function(s,g){oe(g)&&de?G(this,s):(this.nativeSelection.addRange($(s)),this.refresh())},x.setRanges=function(s){if(Fe&&be&&s.length>1)E(this,s);else{this.removeAllRanges();for(var g=0,w=s.length;g<w;++g)this.addRange(s[g])}}}else if(Z(fe,"empty")&&Z(Ye,"select")&&Fe&&pe)x.removeAllRanges=function(){try{if(this.docSelection.empty(),this.docSelection.type!="None"){var s;if(this.anchorNode)s=Se(this.anchorNode);else if(this.docSelection.type==qe){var g=this.docSelection.createRange();g.length&&(s=Se(g.item(0)))}if(s){var w=ue(s).createTextRange();w.select(),this.docSelection.empty()}}}catch{}M(this)},x.addRange=function(s){this.docSelection.type==qe?St(this,s):(v.WrappedTextRange.rangeToTextRange(s).select(),this._ranges[0]=s,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,Ge(this,s,!1),J(this))},x.setRanges=function(s){this.removeAllRanges();var g=s.length;g>1?E(this,s):g&&this.addRange(s[0])};else return T.fail("No means of selecting a Range or TextRange was found"),!1;x.getRangeAt=function(s){if(s<0||s>=this.rangeCount)throw new Ie("INDEX_SIZE_ERR");return this._ranges[s].cloneRange()};var q;if(pe)q=function(s){var g;v.isSelectionValid(s.win)?g=s.docSelection.createRange():(g=ue(s.win.document).createTextRange(),g.collapse(!0)),s.docSelection.type==qe?ze(s):Re(g)?Ke(s,g):M(s)};else if(Z(fe,"getRangeAt")&&typeof fe.rangeCount==D)q=function(s){if(Fe&&be&&s.docSelection.type==qe)ze(s);else if(s._ranges.length=s.rangeCount=s.nativeSelection.rangeCount,s.rangeCount){for(var g=0,w=s.rangeCount;g<w;++g)s._ranges[g]=new v.WrappedRange(s.nativeSelection.getRangeAt(g));Ge(s,s._ranges[s.rangeCount-1],Q(s.nativeSelection)),s.isCollapsed=Ve(s),J(s)}else M(s)};else if(U&&typeof fe.isCollapsed==R&&typeof Ye.collapsed==R&&ve.implementsDomRange)q=function(s){var g,w=s.nativeSelection;w.anchorNode?(g=l(w,0),s._ranges=[g],s.rangeCount=1,C(s),s.isCollapsed=Ve(s),J(s)):M(s)};else return T.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;x.refresh=function(s){var g=s?this._ranges.slice(0):null,w=this.anchorNode,P=this.anchorOffset;if(q(this),s){var X=g.length;if(X!=this._ranges.length||this.anchorNode!=w||this.anchorOffset!=P)return!0;for(;X--;)if(!O(g[X],this._ranges[X]))return!0;return!1}};var te=function(s,g){var w=s.getAllRanges();s.removeAllRanges();for(var P=0,X=w.length;P<X;++P)O(g,w[P])||s.addRange(w[P]);s.rangeCount||M(s)};Fe&&be?x.removeRange=function(s){if(this.docSelection.type==qe){for(var g=this.docSelection.createRange(),w=me(s),P=Se(g.item(0)),X=ue(P).createControlRange(),he,We=!1,a=0,m=g.length;a<m;++a)he=g.item(a),he!==w||We?X.add(g.item(a)):We=!0;X.select(),ze(this)}else te(this,s)}:x.removeRange=function(s){te(this,s)};var Q;!pe&&U&&ve.implementsDomRange?(Q=ie,x.isBackward=function(){return Q(this)}):Q=x.isBackward=function(){return!1},x.isBackwards=x.isBackward,x.toString=function(){for(var s=[],g=0,w=this.rangeCount;g<w;++g)s[g]=""+this._ranges[g];return s.join("")};function Oe(s,g){if(s.win.document!=Se(g))throw new Ie("WRONG_DOCUMENT_ERR")}function Ce(s,g){if(g<0||g>(j.isCharacterDataNode(s)?s.length:s.childNodes.length))throw new Ie("INDEX_SIZE_ERR")}x.collapse=function(s,g){Oe(this,s);var w=v.createRange(s);w.collapseToPoint(s,g),this.setSingleRange(w),this.isCollapsed=!0},x.collapseToStart=function(){if(this.rangeCount){var s=this._ranges[0];this.collapse(s.startContainer,s.startOffset)}else throw new Ie("INVALID_STATE_ERR")},x.collapseToEnd=function(){if(this.rangeCount){var s=this._ranges[this.rangeCount-1];this.collapse(s.endContainer,s.endOffset)}else throw new Ie("INVALID_STATE_ERR")},x.selectAllChildren=function(s){Oe(this,s);var g=v.createRange(s);g.selectNodeContents(s),this.setSingleRange(g)},ye?x.setBaseAndExtent=function(s,g,w,P){this.nativeSelection.setBaseAndExtent(s,g,w,P),this.refresh()}:de&&(x.setBaseAndExtent=function(s,g,w,P){Ce(s,g),Ce(w,P),Oe(this,s),Oe(this,w);var X=v.createRange(node),he=j.comparePoints(s,g,w,P)==-1;he?X.setStartAndEnd(w,P,s,g):X.setStartAndEnd(s,g,w,P),this.setSingleRange(X,he)}),x.deleteFromDocument=function(){if(Fe&&be&&this.docSelection.type==qe){for(var s=this.docSelection.createRange(),g;s.length;)g=s.item(0),s.remove(g),j.removeNode(g);this.refresh()}else if(this.rangeCount){var w=this.getAllRanges();if(w.length){this.removeAllRanges();for(var P=0,X=w.length;P<X;++P)w[P].deleteContents();this.addRange(w[X-1])}}},x.eachRange=function(s,g){for(var w=0,P=this._ranges.length;w<P;++w)if(s(this.getRangeAt(w)))return g},x.getAllRanges=function(){var s=[];return this.eachRange(function(g){s.push(g)}),s},x.setSingleRange=function(s,g){this.removeAllRanges(),this.addRange(s,g)},x.callMethodOnEachRange=function(s,g){var w=[];return this.eachRange(function(P){w.push(P[s].apply(P,g||[]))}),w};function Me(s){return function(g,w){var P;this.rangeCount?(P=this.getRangeAt(0),P["set"+(s?"Start":"End")](g,w)):(P=v.createRange(this.win.document),P.setStartAndEnd(g,w)),this.setSingleRange(P,this.isBackward())}}x.setStart=Me(!0),x.setEnd=Me(!1),v.rangePrototype.select=function(s){S(this.getDocument()).setSingleRange(this,s)},x.changeEachRange=function(s){var g=[],w=this.isBackward();this.eachRange(function(P){s(P),g.push(P)}),this.removeAllRanges(),w&&g.length==1?this.addRange(g[0],"backward"):this.setRanges(g)},x.containsNode=function(s,g){return this.eachRange(function(w){return w.containsNode(s,g)},!0)||!1},x.getBookmark=function(s){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[s])}},x.moveToBookmark=function(s){for(var g=[],w=0,P,X;P=s.rangeBookmarks[w++];)X=v.createRange(this.win),X.moveToBookmark(P),g.push(X);s.backward?this.setSingleRange(g[0],"backward"):this.setRanges(g)},x.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},x.restoreRanges=function(s){this.removeAllRanges();for(var g=0,w;w=s.ranges[g];++g)this.addRange(w,s.backward&&g==0)},x.toHtml=function(){var s=[];return this.eachRange(function(g){s.push(we.toHtml(g))}),s.join("")},ve.implementsTextRange&&(x.getNativeTextRange=function(){var s,g;if(s=this.docSelection){var w=s.createRange();if(Re(w))return w;throw T.createError("getNativeTextRange: selection is a control selection")}else{if(this.rangeCount>0)return v.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw T.createError("getNativeTextRange: selection contains no range")}});function He(s){var g=[],w=new ge(s.anchorNode,s.anchorOffset),P=new ge(s.focusNode,s.focusOffset),X=typeof s.getName=="function"?s.getName():"Selection";if(typeof s.rangeCount<"u")for(var he=0,We=s.rangeCount;he<We;++he)g[he]=we.inspect(s.getRangeAt(he));return"["+X+"(Ranges: "+g.join(", ")+")(anchor: "+w.inspect()+", focus: "+P.inspect()+"]"}x.getName=function(){return"WrappedSelection"},x.inspect=function(){return He(this)},x.detach=function(){b(this.win,"delete"),h(this)},f.detachAll=function(){b(null,"deleteAll")},f.inspect=He,f.isDirectionBackward=oe,v.Selection=f,v.selectionPrototype=x,v.addShimListener(function(s){typeof s.getSelection>"u"&&(s.getSelection=function(){return S(s)}),s=null})});var jt=!1,$t=function(v){jt||(jt=!0,!ne.initialized&&ne.config.autoInitialize&&ar())};return rt&&(document.readyState=="complete"?$t():(o(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",$t,!1),ot(window,"load",$t))),ne},Sn)});var ni=bn((Cr,ri)=>{(function(r,e){typeof Cr=="object"&&typeof ri=="object"?ri.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Cr=="object"?Cr.bowser=e():r.bowser=e()})(Cr,function(){return function(r){var e={};function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=r,t.c=e,t.d=function(n,i,u){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:u})},t.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){if(1&i&&(n=t(n)),8&i||4&i&&typeof n=="object"&&n&&n.__esModule)return n;var u=Object.create(null);if(t.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:n}),2&i&&typeof n!="string")for(var p in n)t.d(u,p,function(o){return n[o]}.bind(null,p));return u},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},t.p="",t(t.s=90)}({17:function(r,e,t){"use strict";e.__esModule=!0,e.default=void 0;var n=t(18),i=function(){function u(){}return u.getFirstMatch=function(p,o){var c=o.match(p);return c&&c.length>0&&c[1]||""},u.getSecondMatch=function(p,o){var c=o.match(p);return c&&c.length>1&&c[2]||""},u.matchAndReturnConst=function(p,o,c){if(p.test(o))return c},u.getWindowsVersionName=function(p){switch(p){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},u.getMacOSVersionName=function(p){var o=p.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(o.push(0),o[0]===10)switch(o[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},u.getAndroidVersionName=function(p){var o=p.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(o.push(0),!(o[0]===1&&o[1]<5))return o[0]===1&&o[1]<6?"Cupcake":o[0]===1&&o[1]>=6?"Donut":o[0]===2&&o[1]<2?"Eclair":o[0]===2&&o[1]===2?"Froyo":o[0]===2&&o[1]>2?"Gingerbread":o[0]===3?"Honeycomb":o[0]===4&&o[1]<1?"Ice Cream Sandwich":o[0]===4&&o[1]<4?"Jelly Bean":o[0]===4&&o[1]>=4?"KitKat":o[0]===5?"Lollipop":o[0]===6?"Marshmallow":o[0]===7?"Nougat":o[0]===8?"Oreo":o[0]===9?"Pie":void 0},u.getVersionPrecision=function(p){return p.split(".").length},u.compareVersions=function(p,o,c){c===void 0&&(c=!1);var d=u.getVersionPrecision(p),W=u.getVersionPrecision(o),B=Math.max(d,W),_=0,I=u.map([p,o],function(F){var ce=B-u.getVersionPrecision(F),Ee=F+new Array(ce+1).join(".0");return u.map(Ee.split("."),function($e){return new Array(20-$e.length).join("0")+$e}).reverse()});for(c&&(_=B-Math.min(d,W)),B-=1;B>=_;){if(I[0][B]>I[1][B])return 1;if(I[0][B]===I[1][B]){if(B===_)return 0;B-=1}else if(I[0][B]<I[1][B])return-1}},u.map=function(p,o){var c,d=[];if(Array.prototype.map)return Array.prototype.map.call(p,o);for(c=0;c<p.length;c+=1)d.push(o(p[c]));return d},u.find=function(p,o){var c,d;if(Array.prototype.find)return Array.prototype.find.call(p,o);for(c=0,d=p.length;c<d;c+=1){var W=p[c];if(o(W,c))return W}},u.assign=function(p){for(var o,c,d=p,W=arguments.length,B=new Array(W>1?W-1:0),_=1;_<W;_++)B[_-1]=arguments[_];if(Object.assign)return Object.assign.apply(Object,[p].concat(B));var I=function(){var F=B[o];typeof F=="object"&&F!==null&&Object.keys(F).forEach(function(ce){d[ce]=F[ce]})};for(o=0,c=B.length;o<c;o+=1)I();return p},u.getBrowserAlias=function(p){return n.BROWSER_ALIASES_MAP[p]},u.getBrowserTypeByAlias=function(p){return n.BROWSER_MAP[p]||""},u}();e.default=i,r.exports=e.default},18:function(r,e,t){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(r,e,t){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=t(91))&&n.__esModule?n:{default:n},u=t(18);function p(c,d){for(var W=0;W<d.length;W++){var B=d[W];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(c,B.key,B)}}var o=function(){function c(){}var d,W,B;return c.getParser=function(_,I){if(I===void 0&&(I=!1),typeof _!="string")throw new Error("UserAgent should be a string");return new i.default(_,I)},c.parse=function(_){return new i.default(_).getResult()},d=c,B=[{key:"BROWSER_MAP",get:function(){return u.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return u.ENGINE_MAP}},{key:"OS_MAP",get:function(){return u.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return u.PLATFORMS_MAP}}],(W=null)&&p(d.prototype,W),B&&p(d,B),c}();e.default=o,r.exports=e.default},91:function(r,e,t){"use strict";e.__esModule=!0,e.default=void 0;var n=c(t(92)),i=c(t(93)),u=c(t(94)),p=c(t(95)),o=c(t(17));function c(W){return W&&W.__esModule?W:{default:W}}var d=function(){function W(_,I){if(I===void 0&&(I=!1),_==null||_==="")throw new Error("UserAgent parameter can't be empty");this._ua=_,this.parsedResult={},I!==!0&&this.parse()}var B=W.prototype;return B.getUA=function(){return this._ua},B.test=function(_){return _.test(this._ua)},B.parseBrowser=function(){var _=this;this.parsedResult.browser={};var I=o.default.find(n.default,function(F){if(typeof F.test=="function")return F.test(_);if(F.test instanceof Array)return F.test.some(function(ce){return _.test(ce)});throw new Error("Browser's test function is not valid")});return I&&(this.parsedResult.browser=I.describe(this.getUA())),this.parsedResult.browser},B.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},B.getBrowserName=function(_){return _?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},B.getBrowserVersion=function(){return this.getBrowser().version},B.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},B.parseOS=function(){var _=this;this.parsedResult.os={};var I=o.default.find(i.default,function(F){if(typeof F.test=="function")return F.test(_);if(F.test instanceof Array)return F.test.some(function(ce){return _.test(ce)});throw new Error("Browser's test function is not valid")});return I&&(this.parsedResult.os=I.describe(this.getUA())),this.parsedResult.os},B.getOSName=function(_){var I=this.getOS().name;return _?String(I).toLowerCase()||"":I||""},B.getOSVersion=function(){return this.getOS().version},B.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},B.getPlatformType=function(_){_===void 0&&(_=!1);var I=this.getPlatform().type;return _?String(I).toLowerCase()||"":I||""},B.parsePlatform=function(){var _=this;this.parsedResult.platform={};var I=o.default.find(u.default,function(F){if(typeof F.test=="function")return F.test(_);if(F.test instanceof Array)return F.test.some(function(ce){return _.test(ce)});throw new Error("Browser's test function is not valid")});return I&&(this.parsedResult.platform=I.describe(this.getUA())),this.parsedResult.platform},B.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},B.getEngineName=function(_){return _?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},B.parseEngine=function(){var _=this;this.parsedResult.engine={};var I=o.default.find(p.default,function(F){if(typeof F.test=="function")return F.test(_);if(F.test instanceof Array)return F.test.some(function(ce){return _.test(ce)});throw new Error("Browser's test function is not valid")});return I&&(this.parsedResult.engine=I.describe(this.getUA())),this.parsedResult.engine},B.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},B.getResult=function(){return o.default.assign({},this.parsedResult)},B.satisfies=function(_){var I=this,F={},ce=0,Ee={},$e=0;if(Object.keys(_).forEach(function(je){var ot=_[je];typeof ot=="string"?(Ee[je]=ot,$e+=1):typeof ot=="object"&&(F[je]=ot,ce+=1)}),ce>0){var rt=Object.keys(F),Je=o.default.find(rt,function(je){return I.isOS(je)});if(Je){var ne=this.satisfies(F[Je]);if(ne!==void 0)return ne}var Ct=o.default.find(rt,function(je){return I.isPlatform(je)});if(Ct){var Ht=this.satisfies(F[Ct]);if(Ht!==void 0)return Ht}}if($e>0){var ct=Object.keys(Ee),Et=o.default.find(ct,function(je){return I.isBrowser(je,!0)});if(Et!==void 0)return this.compareVersion(Ee[Et])}},B.isBrowser=function(_,I){I===void 0&&(I=!1);var F=this.getBrowserName().toLowerCase(),ce=_.toLowerCase(),Ee=o.default.getBrowserTypeByAlias(ce);return I&&Ee&&(ce=Ee.toLowerCase()),ce===F},B.compareVersion=function(_){var I=[0],F=_,ce=!1,Ee=this.getBrowserVersion();if(typeof Ee=="string")return _[0]===">"||_[0]==="<"?(F=_.substr(1),_[1]==="="?(ce=!0,F=_.substr(2)):I=[],_[0]===">"?I.push(1):I.push(-1)):_[0]==="="?F=_.substr(1):_[0]==="~"&&(ce=!0,F=_.substr(1)),I.indexOf(o.default.compareVersions(Ee,F,ce))>-1},B.isOS=function(_){return this.getOSName(!0)===String(_).toLowerCase()},B.isPlatform=function(_){return this.getPlatformType(!0)===String(_).toLowerCase()},B.isEngine=function(_){return this.getEngineName(!0)===String(_).toLowerCase()},B.is=function(_,I){return I===void 0&&(I=!1),this.isBrowser(_,I)||this.isOS(_)||this.isPlatform(_)},B.some=function(_){var I=this;return _===void 0&&(_=[]),_.some(function(F){return I.is(F)})},W}();e.default=d,r.exports=e.default},92:function(r,e,t){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=t(17))&&n.__esModule?n:{default:n},u=/version\/(\d+(\.?_?\d+)+)/i,p=[{test:[/googlebot/i],describe:function(o){var c={name:"Googlebot"},d=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,o)||i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/opera/i],describe:function(o){var c={name:"Opera"},d=i.default.getFirstMatch(u,o)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/opr\/|opios/i],describe:function(o){var c={name:"Opera"},d=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,o)||i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/SamsungBrowser/i],describe:function(o){var c={name:"Samsung Internet for Android"},d=i.default.getFirstMatch(u,o)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/Whale/i],describe:function(o){var c={name:"NAVER Whale Browser"},d=i.default.getFirstMatch(u,o)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/MZBrowser/i],describe:function(o){var c={name:"MZ Browser"},d=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,o)||i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/focus/i],describe:function(o){var c={name:"Focus"},d=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,o)||i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/swing/i],describe:function(o){var c={name:"Swing"},d=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,o)||i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/coast/i],describe:function(o){var c={name:"Opera Coast"},d=i.default.getFirstMatch(u,o)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(o){var c={name:"Opera Touch"},d=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,o)||i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/yabrowser/i],describe:function(o){var c={name:"Yandex Browser"},d=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,o)||i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/ucbrowser/i],describe:function(o){var c={name:"UC Browser"},d=i.default.getFirstMatch(u,o)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/Maxthon|mxios/i],describe:function(o){var c={name:"Maxthon"},d=i.default.getFirstMatch(u,o)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/epiphany/i],describe:function(o){var c={name:"Epiphany"},d=i.default.getFirstMatch(u,o)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/puffin/i],describe:function(o){var c={name:"Puffin"},d=i.default.getFirstMatch(u,o)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/sleipnir/i],describe:function(o){var c={name:"Sleipnir"},d=i.default.getFirstMatch(u,o)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/k-meleon/i],describe:function(o){var c={name:"K-Meleon"},d=i.default.getFirstMatch(u,o)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/micromessenger/i],describe:function(o){var c={name:"WeChat"},d=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,o)||i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/qqbrowser/i],describe:function(o){var c={name:/qqbrowserlite/i.test(o)?"QQ Browser Lite":"QQ Browser"},d=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,o)||i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/msie|trident/i],describe:function(o){var c={name:"Internet Explorer"},d=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/\sedg\//i],describe:function(o){var c={name:"Microsoft Edge"},d=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/edg([ea]|ios)/i],describe:function(o){var c={name:"Microsoft Edge"},d=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/vivaldi/i],describe:function(o){var c={name:"Vivaldi"},d=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/seamonkey/i],describe:function(o){var c={name:"SeaMonkey"},d=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/sailfish/i],describe:function(o){var c={name:"Sailfish"},d=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,o);return d&&(c.version=d),c}},{test:[/silk/i],describe:function(o){var c={name:"Amazon Silk"},d=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/phantom/i],describe:function(o){var c={name:"PhantomJS"},d=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/slimerjs/i],describe:function(o){var c={name:"SlimerJS"},d=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(o){var c={name:"BlackBerry"},d=i.default.getFirstMatch(u,o)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/(web|hpw)[o0]s/i],describe:function(o){var c={name:"WebOS Browser"},d=i.default.getFirstMatch(u,o)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/bada/i],describe:function(o){var c={name:"Bada"},d=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/tizen/i],describe:function(o){var c={name:"Tizen"},d=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,o)||i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/qupzilla/i],describe:function(o){var c={name:"QupZilla"},d=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,o)||i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/firefox|iceweasel|fxios/i],describe:function(o){var c={name:"Firefox"},d=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/electron/i],describe:function(o){var c={name:"Electron"},d=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/MiuiBrowser/i],describe:function(o){var c={name:"Miui"},d=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/chromium/i],describe:function(o){var c={name:"Chromium"},d=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,o)||i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/chrome|crios|crmo/i],describe:function(o){var c={name:"Chrome"},d=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/GSA/i],describe:function(o){var c={name:"Google Search"},d=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:function(o){var c=!o.test(/like android/i),d=o.test(/android/i);return c&&d},describe:function(o){var c={name:"Android Browser"},d=i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/playstation 4/i],describe:function(o){var c={name:"PlayStation 4"},d=i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/safari|applewebkit/i],describe:function(o){var c={name:"Safari"},d=i.default.getFirstMatch(u,o);return d&&(c.version=d),c}},{test:[/.*/i],describe:function(o){var c=o.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(c,o),version:i.default.getSecondMatch(c,o)}}}];e.default=p,r.exports=e.default},93:function(r,e,t){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=t(17))&&n.__esModule?n:{default:n},u=t(18),p=[{test:[/Roku\/DVP/],describe:function(o){var c=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,o);return{name:u.OS_MAP.Roku,version:c}}},{test:[/windows phone/i],describe:function(o){var c=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,o);return{name:u.OS_MAP.WindowsPhone,version:c}}},{test:[/windows /i],describe:function(o){var c=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,o),d=i.default.getWindowsVersionName(c);return{name:u.OS_MAP.Windows,version:c,versionName:d}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(o){var c={name:u.OS_MAP.iOS},d=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,o);return d&&(c.version=d),c}},{test:[/macintosh/i],describe:function(o){var c=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,o).replace(/[_\s]/g,"."),d=i.default.getMacOSVersionName(c),W={name:u.OS_MAP.MacOS,version:c};return d&&(W.versionName=d),W}},{test:[/(ipod|iphone|ipad)/i],describe:function(o){var c=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,o).replace(/[_\s]/g,".");return{name:u.OS_MAP.iOS,version:c}}},{test:function(o){var c=!o.test(/like android/i),d=o.test(/android/i);return c&&d},describe:function(o){var c=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,o),d=i.default.getAndroidVersionName(c),W={name:u.OS_MAP.Android,version:c};return d&&(W.versionName=d),W}},{test:[/(web|hpw)[o0]s/i],describe:function(o){var c=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,o),d={name:u.OS_MAP.WebOS};return c&&c.length&&(d.version=c),d}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(o){var c=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,o)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,o)||i.default.getFirstMatch(/\bbb(\d+)/i,o);return{name:u.OS_MAP.BlackBerry,version:c}}},{test:[/bada/i],describe:function(o){var c=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,o);return{name:u.OS_MAP.Bada,version:c}}},{test:[/tizen/i],describe:function(o){var c=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,o);return{name:u.OS_MAP.Tizen,version:c}}},{test:[/linux/i],describe:function(){return{name:u.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:u.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(o){var c=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,o);return{name:u.OS_MAP.PlayStation4,version:c}}}];e.default=p,r.exports=e.default},94:function(r,e,t){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=t(17))&&n.__esModule?n:{default:n},u=t(18),p=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(o){var c=i.default.getFirstMatch(/(can-l01)/i,o)&&"Nova",d={type:u.PLATFORMS_MAP.mobile,vendor:"Huawei"};return c&&(d.model=c),d}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet}}},{test:function(o){var c=o.test(/ipod|iphone/i),d=o.test(/like (ipod|iphone)/i);return c&&!d},describe:function(o){var c=i.default.getFirstMatch(/(ipod|iphone)/i,o);return{type:u.PLATFORMS_MAP.mobile,vendor:"Apple",model:c}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(o){return o.getBrowserName(!0)==="blackberry"},describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(o){return o.getBrowserName(!0)==="bada"},describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(o){return o.getBrowserName()==="windows phone"},describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(o){var c=Number(String(o.getOSVersion()).split(".")[0]);return o.getOSName(!0)==="android"&&c>=3},describe:function(){return{type:u.PLATFORMS_MAP.tablet}}},{test:function(o){return o.getOSName(!0)==="android"},describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(o){return o.getOSName(!0)==="macos"},describe:function(){return{type:u.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(o){return o.getOSName(!0)==="windows"},describe:function(){return{type:u.PLATFORMS_MAP.desktop}}},{test:function(o){return o.getOSName(!0)==="linux"},describe:function(){return{type:u.PLATFORMS_MAP.desktop}}},{test:function(o){return o.getOSName(!0)==="playstation 4"},describe:function(){return{type:u.PLATFORMS_MAP.tv}}},{test:function(o){return o.getOSName(!0)==="roku"},describe:function(){return{type:u.PLATFORMS_MAP.tv}}}];e.default=p,r.exports=e.default},95:function(r,e,t){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=t(17))&&n.__esModule?n:{default:n},u=t(18),p=[{test:function(o){return o.getBrowserName(!0)==="microsoft edge"},describe:function(o){if(/\sedg\//i.test(o))return{name:u.ENGINE_MAP.Blink};var c=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,o);return{name:u.ENGINE_MAP.EdgeHTML,version:c}}},{test:[/trident/i],describe:function(o){var c={name:u.ENGINE_MAP.Trident},d=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:function(o){return o.test(/presto/i)},describe:function(o){var c={name:u.ENGINE_MAP.Presto},d=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:function(o){var c=o.test(/gecko/i),d=o.test(/like gecko/i);return c&&!d},describe:function(o){var c={name:u.ENGINE_MAP.Gecko},d=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:u.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(o){var c={name:u.ENGINE_MAP.WebKit},d=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}}];e.default=p,r.exports=e.default}})})});var to=bn((oi,si)=>{(function(r,e){typeof define=="function"&&define.amd?define(["./rangy-core"],r):typeof si<"u"&&typeof oi=="object"?si.exports=r(lt()):r(e.rangy)})(function(r){return r.createModule("TextRange",["WrappedSelection"],function(e,t){var n="undefined",i="character",u="word",p=e.dom,o=e.util,c=o.extend,d=o.createOptions,W=p.getBody,B=/^[ \t\f\r\n]+$/,_=/^[ \t\f\r]+$/,I=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,F=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,ce=/^[\n-\r\u0085\u2028\u2029]$/,Ee="en",$e=e.Selection.isDirectionBackward,rt=!1,Je=!1,ne=!1,Ct=!0;(function(){var l=p.createTestElement(document,"<p>1 </p><p></p>",!0),f=l.firstChild,h=e.getSelection();h.collapse(f.lastChild,2),h.setStart(f.firstChild,0),rt=(""+h).length==1,l.innerHTML="1 <br />",h.collapse(l,2),h.setStart(l.firstChild,0),Je=(""+h).length==1,l.innerHTML="1 <p>1</p>",h.collapse(l,2),h.setStart(l.firstChild,0),ne=(""+h).length==1,p.removeNode(l),h.removeAllRanges()})();function Ht(l,f){var h=l.join(""),y,b=[];function S(q,te,Q){b.push({start:q,end:te,isWord:Q})}for(var x=0,E,G;y=f.wordRegex.exec(h);){if(E=y.index,G=E+y[0].length,E>x&&S(x,E,!1),f.includeTrailingSpace)for(;F.test(l[G]);)++G;S(E,G,!0),x=G}return x<l.length&&S(x,l.length,!1),b}function ct(l,f){for(var h=l.slice(f.start,f.end),y={isWord:f.isWord,chars:h,toString:function(){return h.join("")}},b=0,S=h.length;b<S;++b)h[b].token=y;return y}function Et(l,f,h){for(var y=h(l,f),b=[],S=0,x;x=y[S++];)b.push(ct(l,x));return b}var je={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""};function ot(l){var f=l||"",h=typeof f=="string"?f.split(""):f;return h.sort(function(y,b){return y.charCodeAt(0)-b.charCodeAt(0)}),h.join("").replace(/(.)\1+/g,"$1")}var sr={includeBlockContentTrailingSpace:!Ct,includeSpaceBeforeBr:!Je,includeSpaceBeforeBlock:!ne,includePreLineTrailingSpace:!0},zt={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:Ht}},ar={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},Lr={wordOptions:null,characterOptions:null},Fr={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},cr={wordOptions:null,characterOptions:null,direction:"forward"};function gn(l){var f,h;return l?(f=l.language||Ee,h={},c(h,zt[f]||zt[Ee]),c(h,l),h):zt[Ee]}function bt(l,f){var h=d(l,f);return f.hasOwnProperty("wordOptions")&&(h.wordOptions=gn(h.wordOptions)),f.hasOwnProperty("characterOptions")&&(h.characterOptions=d(h.characterOptions,je)),h}var Tt=p.getComputedStyleProperty,ur;(function(){var l=document.createElement("table"),f=W(document);f.appendChild(l),ur=Tt(l,"display")=="block",f.removeChild(l)})();var Dr={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};function jt(l,f){var h=Tt(l,"display",f),y=l.tagName.toLowerCase();return h=="block"&&ur&&Dr.hasOwnProperty(y)?Dr[y]:h}function $t(l){for(var f=re(l),h=0,y=f.length;h<y;++h)if(f[h].nodeType==1&&jt(f[h])=="none")return!0;return!1}function v(l){var f;return l.nodeType==3&&(f=l.parentNode)&&Tt(f,"visibility")=="hidden"}function T(l){return l&&(l.nodeType==1&&!/^(inline(-block|-table)?|none)$/.test(jt(l))||l.nodeType==9||l.nodeType==11)}function R(l){var f=l.lastChild;return f?R(f):l}function D(l){return p.isCharacterDataNode(l)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(l.nodeName)}function j(l){for(var f=[];l.parentNode;)f.unshift(l.parentNode),l=l.parentNode;return f}function re(l){return j(l).concat([l])}function Z(l){for(;l&&!l.nextSibling;)l=l.parentNode;return l?l.nextSibling:null}function we(l,f){return!f&&l.hasChildNodes()?l.firstChild:Z(l)}function ke(l){var f=l.previousSibling;if(f){for(l=f;l.hasChildNodes();)l=l.lastChild;return l}var h=l.parentNode;return h&&h.nodeType==1?h:null}function Ie(l){if(!l||l.nodeType!=3)return!1;var f=l.data;if(f==="")return!0;var h=l.parentNode;if(!h||h.nodeType!=1)return!1;var y=Tt(l.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(f)&&/^(normal|nowrap)$/.test(y)||/^[\t\r ]+$/.test(f)&&y=="pre-line"}function ge(l){if(l.data==="")return!0;if(!Ie(l))return!1;var f=l.parentNode;return!!(!f||$t(l))}function De(l){var f=l.nodeType;return f==7||f==8||$t(l)||/^(script|style)$/i.test(l.nodeName)||v(l)||ge(l)}function Ve(l,f){var h=l.nodeType;return h==7||h==8||h==1&&jt(l,f)=="none"}function ve(){this.store={}}ve.prototype={get:function(l){return this.store.hasOwnProperty(l)?this.store[l]:null},set:function(l,f){return this.store[l]=f}};var qe=0,Se=0;function ue(l,f,h){return function(y){var b=this.cache;if(b.hasOwnProperty(l))return qe++,b[l];Se++;var S=f.call(this,h?this[h]:this,y);return b[l]=S,S}}function O(l,f){this.node=l,this.session=f,this.cache=new ve,this.positions=new ve}var oe={getPosition:function(l){var f=this.positions;return f.get(l)||f.set(l,new U(this,l))},toString:function(){return"[NodeWrapper("+p.inspectNode(this.node)+")]"}};O.prototype=oe;var V="EMPTY",le="NON_SPACE",Ne="UNCOLLAPSIBLE_SPACE",ie="COLLAPSIBLE_SPACE",ee="TRAILING_SPACE_BEFORE_BLOCK",be="TRAILING_SPACE_IN_BLOCK",pe="TRAILING_SPACE_BEFORE_BR",fe="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",Ye="TRAILING_LINE_BREAK_AFTER_BR",L="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";c(oe,{isCharacterDataNode:ue("isCharacterDataNode",p.isCharacterDataNode,"node"),getNodeIndex:ue("nodeIndex",p.getNodeIndex,"node"),getLength:ue("nodeLength",p.getNodeLength,"node"),containsPositions:ue("containsPositions",D,"node"),isWhitespace:ue("isWhitespace",Ie,"node"),isCollapsedWhitespace:ue("isCollapsedWhitespace",ge,"node"),getComputedDisplay:ue("computedDisplay",jt,"node"),isCollapsed:ue("collapsed",De,"node"),isIgnored:ue("ignored",Ve,"node"),next:ue("nextPos",we,"node"),previous:ue("previous",ke,"node"),getTextNodeInfo:ue("textNodeInfo",function(l){var f=null,h=!1,y=Tt(l.parentNode,"whiteSpace"),b=y=="pre-line";return b?(f=_,h=!0):(y=="normal"||y=="nowrap")&&(f=B,h=!0),{node:l,text:l.data,spaceRegex:f,collapseSpaces:h,preLine:b}},"node"),hasInnerText:ue("hasInnerText",function(l,f){for(var h=this.session,y=h.getPosition(l.parentNode,this.getNodeIndex()+1),b=h.getPosition(l,0),S=f?y:b,x=f?b:y;S!==x;){if(S.prepopulateChar(),S.isDefinitelyNonEmpty())return!0;S=f?S.previousVisible():S.nextVisible()}return!1},"node"),isRenderedBlock:ue("isRenderedBlock",function(l){for(var f=l.getElementsByTagName("br"),h=0,y=f.length;h<y;++h)if(!De(f[h]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:ue("trailingSpace",function(l){if(l.tagName.toLowerCase()=="br")return"";switch(this.getComputedDisplay()){case"inline":for(var f=l.lastChild;f;){if(!Ve(f))return f.nodeType==1?this.session.getNodeWrapper(f).getTrailingSpace():"";f=f.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"	";default:return this.isRenderedBlock(!0)?`
`:""}return""},"node"),getLeadingSpace:ue("leadingSpace",function(l){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?`
`:""}return""},"node")});function U(l,f){this.offset=f,this.nodeWrapper=l,this.node=l.node,this.session=l.session,this.cache=new ve}function de(){return"[Position("+p.inspectNode(this.node)+":"+this.offset+")]"}var ye={character:"",characterType:V,isBr:!1,prepopulateChar:function(){var l=this;if(!l.prepopulatedChar){var f=l.node,h=l.offset,y="",b=V,S=!1;if(h>0)if(f.nodeType==3){var x=f.data,E=x.charAt(h-1),G=l.nodeWrapper.getTextNodeInfo(),q=G.spaceRegex;G.collapseSpaces?q.test(E)?h>1&&q.test(x.charAt(h-2))||(G.preLine&&x.charAt(h)===`
`?(y=" ",b=fe):(y=" ",b=ie)):(y=E,b=le,S=!0):(y=E,b=Ne,S=!0)}else{var te=f.childNodes[h-1];if(te&&te.nodeType==1&&!De(te)&&(te.tagName.toLowerCase()=="br"?(y=`
`,l.isBr=!0,b=ie,S=!1):l.checkForTrailingSpace=!0),!y){var Q=f.childNodes[h];Q&&Q.nodeType==1&&!De(Q)&&(l.checkForLeadingSpace=!0)}}l.prepopulatedChar=!0,l.character=y,l.characterType=b,l.isCharInvariant=S}},isDefinitelyNonEmpty:function(){var l=this.characterType;return l==le||l==Ne},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var l=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();l&&(this.isTrailingSpace=!0,this.character=l,this.characterType=ie),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var f=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();f&&(this.isLeadingSpace=!0,this.character=f,this.characterType=ie),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(l){for(var f=this,h;f=f.previousVisible();)if(h=f.getCharacter(l),h!=="")return f;return null},getCharacter:function(l){this.resolveLeadingAndTrailingSpaces();var f=this.character,h,y=ot(l.ignoreCharacters),b=f!==""&&y.indexOf(f)>-1;if(this.isCharInvariant)return h=b?"":f,h;var S=["character",l.includeSpaceBeforeBr,l.includeBlockContentTrailingSpace,l.includePreLineTrailingSpace,y].join("_"),x=this.cache.get(S);if(x!==null)return x;var E="",G=this.characterType==ie,q,te,Q=!1,Oe=this;function Ce(){return Q||(te=Oe.getPrecedingUncollapsedPosition(l),Q=!0),te}return G&&(this.type==L?E=`
`:f==" "&&(!Ce()||te.isTrailingSpace||te.character==`
`||te.character==" "&&te.characterType==ie)||(f==`
`&&this.isLeadingSpace?Ce()&&te.character!=`
`&&(E=`
`):(q=this.nextUncollapsed(),q&&(q.isBr?this.type=pe:q.isTrailingSpace&&q.character==`
`?this.type=be:q.isLeadingSpace&&q.character==`
`&&(this.type=ee),q.character==`
`?this.type==pe&&!l.includeSpaceBeforeBr||this.type==ee&&!l.includeSpaceBeforeBlock||this.type==be&&q.isTrailingSpace&&!l.includeBlockContentTrailingSpace||this.type==fe&&q.type==le&&!l.includePreLineTrailingSpace||(f==`
`?q.isTrailingSpace?this.isTrailingSpace||this.isBr&&(q.type=Ye,Ce()&&te.isLeadingSpace&&!te.isTrailingSpace&&te.character==`
`?q.character="":q.type=L):E=`
`:f==" "&&(E=" ")):E=f)))),y.indexOf(E)>-1&&(E=""),this.cache.set(S,E),E},equals:function(l){return!!l&&this.node===l.node&&this.offset===l.offset},inspect:de,toString:function(){return this.character}};U.prototype=ye,c(ye,{next:ue("nextPos",function(l){var f=l.nodeWrapper,h=l.node,y=l.offset,b=f.session;if(!h)return null;var S,x,E;return y==f.getLength()?(S=h.parentNode,x=S?f.getNodeIndex()+1:0):f.isCharacterDataNode()?(S=h,x=y+1):(E=h.childNodes[y],b.getNodeWrapper(E).containsPositions()?(S=E,x=0):(S=h,x=y+1)),S?b.getPosition(S,x):null}),previous:ue("previous",function(l){var f=l.nodeWrapper,h=l.node,y=l.offset,b=f.session,S,x,E;return y==0?(S=h.parentNode,x=S?f.getNodeIndex():0):f.isCharacterDataNode()?(S=h,x=y-1):(E=h.childNodes[y-1],b.getNodeWrapper(E).containsPositions()?(S=E,x=p.getNodeLength(E)):(S=h,x=y-1)),S?b.getPosition(S,x):null}),nextVisible:ue("nextVisible",function(l){var f=l.next();if(!f)return null;var h=f.nodeWrapper,y=f.node,b=f;return h.isCollapsed()&&(b=h.session.getPosition(y.parentNode,h.getNodeIndex()+1)),b}),nextUncollapsed:ue("nextUncollapsed",function(l){for(var f=l;f=f.nextVisible();)if(f.resolveLeadingAndTrailingSpaces(),f.character!=="")return f;return null}),previousVisible:ue("previousVisible",function(l){var f=l.previous();if(!f)return null;var h=f.nodeWrapper,y=f.node,b=f;return h.isCollapsed()&&(b=h.session.getPosition(y.parentNode,h.getNodeIndex())),b})});var Te=null,Xe=function(){function l(y){var b=new ve;return{get:function(S){var x=b.get(S[y]);if(x){for(var E=0,G;G=x[E++];)if(G.node===S)return G}return null},set:function(S){var x=S.node[y],E=b.get(x)||b.set(x,[]);E.push(S)}}}var f=o.isHostProperty(document.documentElement,"uniqueID");function h(){this.initCaches()}return h.prototype={initCaches:function(){this.elementCache=f?function(){var y=new ve;return{get:function(b){return y.get(b.uniqueID)},set:function(b){y.set(b.node.uniqueID,b)}}}():l("tagName"),this.textNodeCache=l("data"),this.otherNodeCache=l("nodeName")},getNodeWrapper:function(y){var b;switch(y.nodeType){case 1:b=this.elementCache;break;case 3:b=this.textNodeCache;break;default:b=this.otherNodeCache;break}var S=b.get(y);return S||(S=new O(y,this),b.set(S)),S},getPosition:function(y,b){return this.getNodeWrapper(y).getPosition(b)},getRangeBoundaryPosition:function(y,b){var S=b?"start":"end";return this.getPosition(y[S+"Container"],y[S+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},h}();function Ue(){return Fe(),Te=new Xe}function Le(){return Te||Ue()}function Fe(){Te&&Te.detach(),Te=null}c(p,{nextNode:we,previousNode:ke});function Be(l,f,h,y){h&&(f?De(h.node)&&(h=l.previousVisible()):De(h.node)&&(h=h.nextVisible()));var b=l,S=!1;function x(){var q=null;return f?(q=b,S||(b=b.previousVisible(),S=!b||h&&b.equals(h))):S||(q=b=b.nextVisible(),S=!b||h&&b.equals(h)),S&&(b=null),q}var E,G=!1;return{next:function(){if(G)return G=!1,E;for(var q,te;q=x();)if(te=q.getCharacter(y),te)return E=q,q;return null},rewind:function(){if(E)G=!0;else throw t.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.")},dispose:function(){l=h=null}}}var Ge=Array.prototype.indexOf?function(l,f){return l.indexOf(f)}:function(l,f){for(var h=0,y=l.length;h<y;++h)if(l[h]===f)return h;return-1};function C(l,f,h){var y=Be(l,!1,null,f),b=Be(l,!0,null,f),S=h.tokenizer;function x(Ce){for(var Me,He,s=[],g=Ce?y:b,w=!1,P=!1;Me=g.next();){if(He=Me.character,I.test(He))P&&(P=!1,w=!0);else if(w){g.rewind();break}else P=!0;s.push(Me)}return s}var E=x(!0),G=x(!1).reverse(),q=Et(G.concat(E),h,S),te=E.length?q.slice(Ge(q,E[0].token)):[],Q=G.length?q.slice(0,Ge(q,G.pop().token)+1):[];function Oe(Ce){for(var Me=["["+Ce.length+"]"],He=0;He<Ce.length;++He)Me.push("(word: "+Ce[He]+", is word: "+Ce[He].isWord+")");return Me}return{nextEndToken:function(){for(var Ce,Me;te.length==1&&!(Ce=te[0]).isWord&&(Me=x(!0)).length>0;)te=Et(Ce.chars.concat(Me),h,S);return te.shift()},previousStartToken:function(){for(var Ce,Me;Q.length==1&&!(Ce=Q[0]).isWord&&(Me=x(!1)).length>0;)Q=Et(Me.reverse().concat(Ce.chars),h,S);return Q.pop()},dispose:function(){y.dispose(),b.dispose(),te=Q=null}}}function M(l,f,h,y,b){var S=0,x,E=l,G,q,te=Math.abs(h),Q;if(h!==0){var Oe=h<0;switch(f){case i:for(G=Be(l,Oe,null,y);(x=G.next())&&S<te;)++S,E=x;q=x,G.dispose();break;case u:for(var Ce=C(l,y,b),Me=Oe?Ce.previousStartToken:Ce.nextEndToken;(Q=Me())&&S<te;)Q.isWord&&(++S,E=Oe?Q.chars[0]:Q.chars[Q.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+f+"' not implemented")}Oe?(E=E.previousVisible(),S=-S):E&&E.isLeadingSpace&&!E.isTrailingSpace&&(f==u&&(G=Be(l,!1,null,y),q=G.next(),G.dispose()),q&&(E=q.previousVisible()))}return{position:E,unitsMoved:S}}function J(l,f,h,y){var b=l.getRangeBoundaryPosition(f,!0),S=l.getRangeBoundaryPosition(f,!1),x=y?S:b,E=y?b:S;return Be(x,!!y,E,h)}function $(l,f,h){for(var y=[],b=J(l,f,h),S;S=b.next();)y.push(S);return b.dispose(),y}function Ae(l,f,h){var y=e.createRange(l.node);return y.setStartAndEnd(l.node,l.offset,f.node,f.offset),!y.expand("word",{wordOptions:h})}function me(l,f,h,y,b){var S=$e(b.direction),x=Be(l,S,l.session.getRangeBoundaryPosition(y,S),b.characterOptions),E="",G=[],q,te,Q,Oe,Ce,Me,He=null;function s(g,w){var P=G[g].previousVisible(),X=G[w-1],he=!b.wholeWordsOnly||Ae(P,X,b.wordOptions);return{startPos:P,endPos:X,valid:he}}for(;q=x.next();)if(te=q.character,!h&&!b.caseSensitive&&(te=te.toLowerCase()),S?(G.unshift(q),E=te+E):(G.push(q),E+=te),h){if(Ce=f.exec(E),Ce)if(Q=Ce.index,Oe=Q+Ce[0].length,Me){if(!S&&Oe<E.length||S&&Q>0){He=s(Q,Oe);break}}else Me=!0}else if((Q=E.indexOf(f))!=-1){He=s(Q,Q+f.length);break}return Me&&(He=s(Q,Oe)),x.dispose(),He}function Re(l){return function(){var f=!!Te,h=Le(),y=[h].concat(o.toArray(arguments)),b=l.apply(this,y);return f||Fe(),b}}function Ke(l,f){return Re(function(h,y,b,S){typeof b==n&&(b=y,y=i),S=bt(S,Lr);var x=l;f&&(x=b>=0,this.collapse(!x));var E=M(h.getRangeBoundaryPosition(this,x),y,b,S.characterOptions,S.wordOptions),G=E.position;return this[x?"setStart":"setEnd"](G.node,G.offset),E.unitsMoved})}function ze(l){return Re(function(f,h){h=d(h,je);for(var y,b=J(f,this,h,!l),S=0;(y=b.next())&&I.test(y.character);)++S;b.dispose();var x=S>0;return x&&this[l?"moveStart":"moveEnd"]("character",l?S:-S,{characterOptions:h}),x})}c(e.rangePrototype,{moveStart:Ke(!0,!1),moveEnd:Ke(!1,!1),move:Ke(!0,!0),trimStart:ze(!0),trimEnd:ze(!1),trim:Re(function(l,f){var h=this.trimStart(f),y=this.trimEnd(f);return h||y}),expand:Re(function(l,f,h){var y=!1;h=bt(h,Fr);var b=h.characterOptions;if(f||(f=i),f==u){var S=h.wordOptions,x=l.getRangeBoundaryPosition(this,!0),E=l.getRangeBoundaryPosition(this,!1),G=C(x,b,S),q=G.nextEndToken(),te=q.chars[0].previousVisible(),Q,Oe;if(this.collapsed)Q=q;else{var Ce=C(E,b,S);Q=Ce.previousStartToken()}return Oe=Q.chars[Q.chars.length-1],te.equals(x)||(this.setStart(te.node,te.offset),y=!0),Oe&&!Oe.equals(E)&&(this.setEnd(Oe.node,Oe.offset),y=!0),h.trim&&(h.trimStart&&(y=this.trimStart(b)||y),h.trimEnd&&(y=this.trimEnd(b)||y)),y}else return this.moveEnd(i,1,h)}),text:Re(function(l,f){return this.collapsed?"":$(l,this,d(f,je)).join("")}),selectCharacters:Re(function(l,f,h,y,b){var S={characterOptions:b};f||(f=W(this.getDocument())),this.selectNodeContents(f),this.collapse(!0),this.moveStart("character",h,S),this.collapse(!0),this.moveEnd("character",y-h,S)}),toCharacterRange:Re(function(l,f,h){f||(f=W(this.getDocument()));var y=f.parentNode,b=p.getNodeIndex(f),S=p.comparePoints(this.startContainer,this.endContainer,y,b)==-1,x=this.cloneRange(),E,G;return S?(x.setStartAndEnd(this.startContainer,this.startOffset,y,b),E=-x.text(h).length):(x.setStartAndEnd(y,b,this.startContainer,this.startOffset),E=x.text(h).length),G=E+this.text(h).length,{start:E,end:G}}),findText:Re(function(l,f,h){h=bt(h,ar),h.wholeWordsOnly&&(h.wordOptions.includeTrailingSpace=!1);var y=$e(h.direction),b=h.withinRange;b||(b=e.createRange(),b.selectNodeContents(this.getDocument()));var S=f,x=!1;typeof S=="string"?h.caseSensitive||(S=S.toLowerCase()):x=!0;var E=l.getRangeBoundaryPosition(this,!y),G=b.comparePoint(E.node,E.offset);G===-1?E=l.getRangeBoundaryPosition(b,!0):G===1&&(E=l.getRangeBoundaryPosition(b,!1));for(var q=E,te=!1,Q;;)if(Q=me(q,S,x,b,h),Q){if(Q.valid)return this.setStartAndEnd(Q.startPos.node,Q.startPos.offset,Q.endPos.node,Q.endPos.offset),!0;q=y?Q.startPos:Q.endPos}else if(h.wrap&&!te)b=b.cloneRange(),q=l.getRangeBoundaryPosition(b,!y),b.setBoundary(E.node,E.offset,y),te=!0;else return!1}),pasteHtml:function(l){if(this.deleteContents(),l){var f=this.createContextualFragment(l),h=f.lastChild;this.insertNode(f),this.collapseAfter(h)}}});function St(l){return Re(function(f,h){var y=!1;return this.changeEachRange(function(b){y=b[l](h)||y}),y})}c(e.selectionPrototype,{expand:Re(function(l,f,h){this.changeEachRange(function(y){y.expand(f,h)})}),move:Re(function(l,f,h,y){var b=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var S=this.getRangeAt(0);y||(y={}),y.characterOptions=d(y.characterOptions,sr),b=S.move(f,h,y),this.setSingleRange(S)}return b}),trimStart:St("trimStart"),trimEnd:St("trimEnd"),trim:St("trim"),selectCharacters:Re(function(l,f,h,y,b,S){var x=e.createRange(f);x.selectCharacters(f,h,y,S),this.setSingleRange(x,b)}),saveCharacterRanges:Re(function(l,f,h){for(var y=this.getAllRanges(),b=y.length,S=[],x=b==1&&this.isBackward(),E=0,G=y.length;E<G;++E)S[E]={characterRange:y[E].toCharacterRange(f,h),backward:x,characterOptions:h};return S}),restoreCharacterRanges:Re(function(l,f,h){this.removeAllRanges();for(var y=0,b=h.length,S,x,E;y<b;++y)x=h[y],E=x.characterRange,S=e.createRange(f),S.selectCharacters(f,E.start,E.end,x.characterOptions),this.addRange(S,x.backward)}),text:Re(function(l,f){for(var h=[],y=0,b=this.rangeCount;y<b;++y)h[y]=this.getRangeAt(y).text(f);return h.join("")})}),e.innerText=function(l,f){var h=e.createRange(l);h.selectNodeContents(l);var y=h.text(f);return y},e.createWordIterator=function(l,f,h){var y=Le();h=bt(h,cr);var b=y.getPosition(l,f),S=C(b,h.characterOptions,h.wordOptions),x=$e(h.direction);return{next:function(){return x?S.previousStartToken():S.nextEndToken()},dispose:function(){S.dispose(),this.next=function(){}}}},e.noMutation=function(l){var f=Le();l(f),Fe()},e.noMutation.createEntryPointFunction=Re,e.textRange={isBlockNode:T,isCollapsedWhitespaceNode:ge,createPosition:Re(function(l,f,h){return l.getPosition(f,h)})}}),r},oi)});var Ir=st(lt());var K={log:!1,logErrors:!0,editableClass:"js-editable",editableDisabledClass:"js-editable-disabled",pastingAttribute:"data-editable-is-pasting",trimLeadingAndTrailingWhitespaces:!0,boldMarkup:{type:"tag",name:"strong",attribs:{},trim:!0},italicMarkup:{type:"tag",name:"em",attribs:{},trim:!0},underlineMarkup:{type:"tag",name:"u",attribs:{},trim:!1},linkMarkup:{type:"tag",name:"a",attribs:{},trim:!0},pastedHtmlRules:{allowedElements:{a:{href:!0,rel:!0,target:!0},strong:{},em:{},br:{}},requiredAttributes:{a:["href"]},transformElements:{b:"strong",i:"em"},splitIntoBlocks:["h1","h2","h3","h4","h5","h6","p","blockquote"],blockLevelElements:["h1","h2","h3","h4","h5","h6","div","p","pre","hr","blockquote","article","figure","header","footer","ul","ol","li","section","table","video"],blacklistedElements:["style","script"],keepInternalRelativeLinks:!1,replaceQuotes:{}}};function ft(){if(K.logErrors===!1)return;let r=arguments.length===1?arguments[0]:Array.from(arguments);if(global.console){if(typeof console.error=="function")return console.error(r);console.log(r)}}var _t={};vi(_t,{getHost:()=>dr,getNodeIndex:()=>jr,isBeginningOfHost:()=>Ut,isDocumentFragmentWithoutChildren:()=>qr,isEndOfHost:()=>Vr,isEndOffset:()=>Tn,isInlineElement:()=>Ys,isLinebreak:()=>Ni,isSameNode:()=>Mn,isStartOffset:()=>En,isTextEndOfHost:()=>Gt,isTextEndOffset:()=>An,isVoid:()=>On,isVoidTextNode:()=>xi,isWhitespaceOnly:()=>wi,lastChild:()=>hr,lastOffsetWithContent:()=>_n,latestChild:()=>Qs});var Gs=Object.prototype.toString,Ks={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function wn(r){return r.replace(/\s+$/,"")}function lr(r){return r.replace(/^\s+|\s+$/g,"")}function Nn(r){return Gs.call(r)==="[object String]"}function yi(r,e){e||(e="g");let t=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");return new RegExp(t,e)}function Ci(r,e){return r.replace(e?/[&<>'"]/g:/[&<>]/g,function(t){return Ks[t]})}function bi(r,e,t){if(!r)return"";if(r=`${r}`,!e||t==null)return r;let n=r.lastIndexOf(e);return n===-1?r:`${r.slice(0,n)}${t}${r.slice(n+e.length)}`}function Si(r){return/\S+\s{1}$/.test(r)}var xt=(r,e)=>typeof r=="string"?Array.from(e.querySelectorAll(r)):r.tagName?[r]:Array.isArray(r)?r:Array.from(r),Rn=(r,e)=>typeof r=="string"?e.querySelector(r):r.tagName?r:r[0]?r[0]:r,Hr=(r,e=window)=>{let t=e.document.createElement("div");return t.innerHTML=r,t.firstElementChild},Ot=(r,e)=>{if(r.closest||(r=r.parentNode),r&&r.closest)return r.closest(e)};function dr(r){return r=r.jquery?r[0]:r,Ot(r,`.${K.editableClass}`)}function jr(r){let e=0;for(;(r=r.previousSibling)!==null;)e++;return e}function On(r){for(let e of r.childNodes)if(e.nodeType===3&&!xi(e)||e.nodeType===1)return!1;return!0}function xi(r){return r.nodeType===3&&!r.nodeValue}function wi(r){return r.nodeType===3&&_n(r)===0}function Ni(r){return r.nodeType===1&&r.tagName==="BR"}function _n(r){if(r.nodeType===3)return wn(r.nodeValue).length;let e=0;return Array.from(r.childNodes).reverse().every((t,n,i)=>wi(t)||Ni(t)?!0:(e=i.length-n,!1)),e}function Ut(r,e,t){if(e===r)return En(e,t);if(En(e,t)){let n=jr(e);return Ut(r,e.parentNode,n)}return!1}function Vr(r,e,t){if(e===r)return Tn(e,t);if(Tn(e,t)){let n=jr(e)+1;return Vr(r,e.parentNode,n)}return!1}function En(r,e){return r.nodeType===3?e===0:r.childNodes.length===0||r.childNodes.length===1&&r.firstChild.nodeType===1&&r.firstChild.getAttribute("data-editable")==="remove"?!0:r.childNodes[e]===r.firstChild}function Tn(r,e){return r.nodeType===3?e===r.length:r.childNodes.length===0?!0:e>0?r.childNodes[e-1]===r.lastChild:!1}function Gt(r,e,t){if(e===r)return An(e,t);if(An(e,t)){let n=jr(e)+1;return Gt(r,e.parentNode,n)}return!1}function An(r,e){if(r.nodeType===3){let t=wn(r.nodeValue);return e>=t.length}return r.childNodes.length===0?!0:e>=_n(r)}function Mn(r,e){let t,n,i;if(r.nodeType!==e.nodeType||r.nodeName!==e.nodeName)return!1;for(t=0,n=r.attributes.length;t<n;t++)if(i=r.attributes[t],e.getAttribute(i.name)!==i.value)return!1;return!0}function hr(r){return r.lastChild?hr(r.lastChild):r}function Qs(r){return console.warn("Editable.js: Using obsolete function parser.latestCild(), use lastChild() instead"),hr(r)}function qr(r){return r&&r.nodeType===11&&r.childNodes.length===0}function Ys(r,e){switch((e.currentStyle||r.getComputedStyle(e,"")).display){case"inline":case"inline-block":return!0;default:return!1}}var ht={};vi(ht,{adoptElement:()=>Kt,areSameAttributes:()=>Hn,cleanInternals:()=>Fn,cloneRangeContents:()=>Gr,containsString:()=>Zr,createFragmentFromString:()=>wt,deleteCharacter:()=>Qt,expandTo:()=>qn,extractContent:()=>Ur,forceWrap:()=>Xr,getAncestorTags:()=>Kr,getContainedTags:()=>jn,getInnerHtmlOfFragment:()=>mr,getInnerTags:()=>Qr,getTagNames:()=>Vn,getTags:()=>Nt,getTagsByName:()=>Wn,getTagsByNameAndAttributes:()=>_i,insertCharacter:()=>Bn,isAffectedBy:()=>ia,isExactSelection:()=>Yr,isWrappable:()=>vr,normalizeTags:()=>In,normalizeWhitespace:()=>Ln,nuke:()=>Un,nukeElem:()=>Gn,nukeTag:()=>sa,removeFormatting:()=>$n,removeFormattingElem:()=>ki,selectNodeContents:()=>oa,surround:()=>Kn,tidyHtml:()=>Vt,toggleTag:()=>zn,unwrap:()=>dt,unwrapInternalNodes:()=>Dn,wrap:()=>Mi});var Pn=st(lt());var Ei=st(lt());var Xs=0,Zs="\uFEFF";function Ti(r,e){for(let t=0;t<r.children.length;t++)if(r.children[t]===e)return!0;return!1}function Js(r){let e=r.commonAncestorContainer;if(e.nodeType===3)return!1;let t=r.startContainer.parentElement;return Ti(e,t)}function ea(r){let e=r.commonAncestorContainer;if(e.nodeType===3)return!1;let t=r.endContainer.parentElement;return Ti(e,t)}function kn(r,e){let t=r.commonAncestorContainer,n=Js(r)&&e,i=ea(r)&&!e;(t.ownerDocument===null||t.ownerDocument===void 0)&&ft("Cannot save range: range is emtpy");let u=t.ownerDocument.defaultView.document,p=u.createElement("span");if(p.id=`editable-range-boundary-${++Xs}`,p.setAttribute("data-editable","remove"),p.style.lineHeight="0",p.style.display="none",p.appendChild(u.createTextNode(Zs)),n)r.endContainer.parentElement.insertBefore(p,r.startContainer.parentElement);else if(i)r.startContainer.parentElement.insertBefore(p,r.endContainer.parentElement.nextSibling);else{let o=r.cloneRange();o.collapse(e),o.insertNode(p)}return p}function Ri(r,e,t,n){let i=Ai(r,t);if(!i)return console.log("Marker element has been removed. Cannot restore selection.");e[n?"setStartBefore":"setEndBefore"](i),i.remove()}function zr(r){let e,t,n;return r.collapsed?(n=kn(r,!1),e={markerId:n.id,collapsed:!0}):(n=kn(r,!1),t=kn(r,!0),e={startMarkerId:t.id,endMarkerId:n.id,collapsed:!1}),r.collapsed?r.collapseBefore(n):(r.setEndBefore(n),r.setStartAfter(t)),e}function $r(r,e){if(e.restored)return;let t=Ei.default.createRange();if(e.collapsed){let n=Ai(r,e.markerId);if(n){n.style.display="inline";let i=n.previousSibling;i&&i.nodeType===3?(n.remove(),t.collapseToPoint(i,i.length)):(t.collapseBefore(n),n.remove())}else console.log("Marker element has been removed. Cannot restore selection.")}else Ri(r,t,e.startMarkerId,!0),Ri(r,t,e.endMarkerId,!1);return t.normalizeBoundaries(),t}function Ai(r,e){return r.querySelector(`#${e}`)}function pr(r,e,t){return e=zr(e),t(),$r(r,e)}var ta=/\u200B/g,ra=/\uFEFF/g,na=/[^\S ]/g;function Vt(r){In(r)}function In(r){let e=document.createDocumentFragment();gr(r,"firstChild"),gr(r,"lastChild");for(let t of r.childNodes)if(!(t.nodeName!=="BR"&&!t.textContent)){if(t.nodeType===1&&t.nodeName!=="BR"){let n=t;for(;(n=n.nextSibling)!==null&&Mn(n,t);){for(let i of n.childNodes)t.appendChild(i.cloneNode(!0));n.remove()}In(t)}e.appendChild(t.cloneNode(!0))}for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(e)}function Ln(r){return r.replace(na," ")}function Fn(r){r.innerHTML=Ur(r,!0)}function Ur(r,e){let t=(r.nodeType===11?mr(r):r.innerHTML).replace(ra,"").replace(ta,"<br>"),n=document.createElement("div");return n.innerHTML=t,Dn(n,e),gr(n,"firstChild"),gr(n,"lastChild"),n.innerHTML}function mr(r){let e=document.createElement("div");return e.appendChild(r),e.innerHTML}function wt(r){let e=document.createElement("div");e.innerHTML=r;let t=document.createDocumentFragment();for(;e.firstChild;)t.appendChild(e.firstChild);return t}function Kt(r,e){return r.ownerDocument!==e?e.adoptNode(r):r}function Gr(r){let t=r.cloneContents().childNodes[0],n=document.createDocumentFragment();for(;t.childNodes.length;)n.appendChild(t.childNodes[0]);return n}function gr(r,e,t=!0){let n;for(;n=r[e];)if(n.nodeType===3)if(/^\s+$/.test(n.textContent))r.removeChild(n);else break;else if(n.nodeName==="BR")n.remove();else{n[e]&&gr(n,e,!1);break}t&&(n=r[e],n?.nodeType===3&&K.trimLeadingAndTrailingWhitespaces&&(n.textContent=n.textContent.replace(e.startsWith("last")?/ +$/:/^ +/,"")))}function Dn(r,e){for(;r;){let t=r.nextSibling;if(r.nodeType!==1){r=t;continue}let n=r.getAttribute("data-editable");r.firstChild&&Dn(r.firstChild,e),(n==="remove"||n==="ui-remove"&&!e)&&r.remove(),(n==="unwrap"||n==="ui-unwrap"&&!e)&&dt(r),r=t}}function Nt(r,e,t){let n=Qr(e,t),i=Kr(r,e,t);return n.concat(i)}function Kr(r,e,t){let n=[],i=e.commonAncestorContainer;for(;i!==r;)(!t||t(i))&&n.push(i),i=i.parentNode;return n}function Wn(r,e,t){return Nt(r,e,n=>n.nodeName.toUpperCase()===t.toUpperCase())}function _i(r,e,t){return Nt(r,e,n=>n.nodeName.toUpperCase()===t.nodeName.toUpperCase()&&Hn(n.attributes,t.attributes))}function Hn(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++){let n=e[r[t].name];if(!(n&&n.value===r[t].value))return!1}return!0}function Qr(r,e){return r.getNodes([1],e)}function jn(r,e){return r.getNodes([1],e).filter(t=>r.containsNodeText(t))}function Vn(r=[]){return r.map(e=>e.nodeName)}function ia(r,e,t){return Nt(r,e).some(n=>n.nodeName===t.toUpperCase())}function oa(r){let e=Pn.default.createRange();return e.selectNodeContents(r),e}function Yr(r,e,t){let n=Pn.default.createRange();if(n.selectNodeContents(e),!r.intersectsRange(n))return!1;let i=r.toString(),u=(e.jquery?e[0]:e).textContent;return t&&(i=lr(i),u=lr(u)),i!==""&&i===u}function qn(r,e,t){return e.selectNodeContents(t),e}function zn(r,e,t){let n=_i(r,e,t);return n.length===1&&Yr(e,n[0],"visible")?ki(r,e,t):Xr(r,e,t)}function vr(r){return r.canSurroundContents()}function Xr(r,e,t){let n=pr(r,e,()=>{Gn(r,e,t)});return vr(n)||(n=pr(r,n,()=>{Un(r,n)})),Mi(n,t),n}function Mi(r,e){if(!vr(r)){console.log("content.wrap(): can not surround range");return}typeof e=="string"&&(e=Hr(e)),r.surroundContents(e)}function dt(r){r=r.jquery?r[0]:r;let e=r.parentNode;for(;r.firstChild;)e.insertBefore(r.firstChild,r);e.removeChild(r)}function ki(r,e,t){return pr(r,e,()=>{Gn(r,e,t)})}function $n(r,e,t){return pr(r,e,()=>{Un(r,e,t)})}function Un(r,e,t){Nt(r,e).forEach(n=>{n.nodeName.toUpperCase()!=="BR"&&(!t||n.matches(t))&&dt(n)})}function Gn(r,e,t){Nt(r,e).forEach(n=>{n.nodeName.toUpperCase()!=="BR"&&(!t||n.nodeName.toUpperCase()===t.nodeName.toUpperCase()&&Hn(n.attributes,t.attributes))&&dt(n)})}function Bn(r,e,t){let n=document.createTextNode(e),i=r.cloneRange();i.collapse(t),i.insertNode(n),r[t?"setStartBefore":"setEndAfter"](n),r.normalizeBoundaries()}function Kn(r,e,t,n){return Bn(e,n||t,!1),Bn(e,t,!0),e}function Qt(r,e,t){if(!Zr(e,t))return e;e.splitBoundaries();let n=pr(r,e,()=>{let i=yi(t);e.getNodes([3],u=>u.nodeValue.search(i)>=0).forEach(u=>{u.nodeValue=u.nodeValue.replace(i,"")})});return n.normalizeBoundaries(),n}function Zr(r,e){return r.toString().indexOf(e)>=0}function sa(r,e,t){Nt(r,e).forEach(n=>{n.nodeName.toUpperCase()===t.toUpperCase()&&dt(n)})}var Bi=1,aa={},Qn=Li("nextElementSibling"),Yn=Li("previousElementSibling");function Pi(r,{normalize:e,shouldSpellcheck:t}){ca(r),r.setAttribute("contenteditable",!0),r.setAttribute("spellcheck",Boolean(t)),r.classList.remove(K.editableDisabledClass),r.classList.add(K.editableClass),e&&Vt(r)}function Ii(r){r.removeAttribute("contenteditable"),r.removeAttribute("spellcheck"),ua(r,void 0),r.classList.remove(K.editableClass),r.classList.add(K.editableDisabledClass)}function ca(r){r.hasAttribute("data-editable")||(r.setAttribute("data-editable",`id-${Bi}`),Bi+=1)}function ua(r,e){if(r.hasAttribute("data-editable")){let t=r.getAttribute("data-editable");aa[t]=e}}function Li(r){return function(e){let t=e[r];return t&&t.getAttribute("contenteditable")?t:null}}var la=[["\xAB","\xBB"],["\xBB","\xAB"],['"','"'],["\u201C","\u201D"],["\u201D","\u201D"],["\u201C","\u201C"],["\u201E","\u201C"]],fa=[["\u2018","\u2019"],["\u2039","\u203A"],["\u201A","\u2018"],["\u2019","\u2019"],["\u203A","\u2039"],["'","'"],["\u2018","\u2019"]],da=["\u2019","'"],Wi=/(['"])(?![^<]*?>)/g,ha=/\s|[>\-"]/,pa=/\s|[<\-"'.;?:,]/,pt;function Hi(r,e){pt=e||{},pt.quotes=pt.quotes||[void 0,void 0],pt.singleQuotes=pt.singleQuotes||[void 0,void 0];let t=va(r);return t.length>0?(ji(t,0),ya(r,t)):r}function ji(r,e){for(;e<r.length;){let t=ga(r,e);if(t){if(r[e].replace=t.type==="double"?pt.quotes[0]:pt.singleQuotes[0],r[t.position].replace=t.type==="double"?pt.quotes[1]:pt.singleQuotes[1],t.position!==e+1){let n=r.slice(e+1,t.position);n&&ji(n,0)}e=t.position+1}else r[e].replace=ma(r[e].char),e+=1}}function ga(r,e){if(e===r.length-1)return;let t=r[e],n=t.char;if(t.before&&!ha.test(t.before))return;let i=Di(n,fa),u=Di(n,la);for(let p=e+1;p<r.length;p++)if(r[p].after&&pa.test(r[p].after)||!r[p].after){if(i.includes(r[p].char))return{position:p,type:"single"};if(u.includes(r[p].char))return{position:p,type:"double"}}}function Di(r,e){return e.filter(t=>t[0]===r).map(t=>t[1])}function ma(r){if(da.includes(r))return pt.apostrophe}function va(r){return[...r.matchAll(Wi)].map(e=>{let t=e.index;return{char:e[1],before:t>0?r[t-1]:"",after:t+1<r.length?r[t+1]:""}})}function ya(r,e){let t=0;return r.replace(Wi,n=>{let i=e[t].replace||e[t].char;return t+=1,i})}var ei,Vi,qi,Xn,yr,Zn,zi,$i=/^\s*$/,Jn="<!-- BLOCK -->",Ui;ti(K);function ti(r){let e=r.pastedHtmlRules;ei=e.allowedElements||{},Vi=e.requiredAttributes||{},qi=e.transformElements||{},zi=e.blacklistedElements||[],Ui=e.keepInternalRelativeLinks||!1,yr=e.replaceQuotes||{},Xn={},e.blockLevelElements.forEach(t=>{Xn[t]=!0}),Zn={},e.splitIntoBlocks.forEach(t=>{Zn[t]=!0})}function Gi(r,e,t){let n=r.ownerDocument;r.setAttribute(K.pastingAttribute,!0),e.isSelection&&(e=e.deleteExactSurroundingTags().deleteContainedTags().deleteContent());let i=n.createElement("div");i.innerHTML=t;let u=ba(i);return r.removeAttribute(K.pastingAttribute),{blocks:u,cursor:e}}function ba(r){return Ki(r).split(Jn).map(e=>lr(Ea(Ta(e)))).filter(e=>!$i.test(e))}function Ki(r){return Array.from(r.childNodes).reduce((e,t)=>{if(zi.indexOf(t.nodeName.toLowerCase())!==-1)return"";if(Ui&&t.nodeName==="A"&&t.href){let n=t.getAttribute("href").replace(window.location.origin,"");t.setAttribute("href",n)}if(t.nodeType===1){let n=Ki(t);return e+Sa(t,n)}return t.nodeType===3?e+Ci(t.nodeValue):e},"")}function Sa(r,e){let t=r.nodeName.toLowerCase();if(t=wa(t),Ra(t,r)){let n=xa(t,r);return t==="br"?`<${t+n}>`:$i.test(e)?e:`<${t+n}>${e}</${t}>`}return Zn[t]?Jn+e+Jn:Xn[t]?`${e} `:e}function xa(r,e){return Array.from(e.attributes).reduce((t,{name:n,value:i})=>ei[r][n]&&i?`${t} ${n}="${i}"`:t,"")}function wa(r){return qi[r]||r}function Na(r,e){let t=Vi[r];return t?!t.some(n=>!e.getAttribute(n)):!0}function Ra(r,e){return ei[r]&&Na(r,e)}function Ea(r){return r.replace(/\n/g," ").replace(/ {2,}/g," ").replace(/(.)\u00A0/g,(e,t)=>t+(/[\u0020]/.test(t)?"\xA0":" "))}function Ta(r){return yr.quotes||yr.singleQuotes||yr.apostrophe?Hi(r,yr):r}var Yi=st(ni()),lf=typeof document.documentElement.contentEditable<"u",Aa=Yi.default.getParser(window.navigator.userAgent),Oa=Aa.getEngineName(),_a=Oa==="WebKit",Ma=r=>{let e=r,t=e.onselectionchange;if(t!==void 0)try{return e.onselectionchange=0,e.onselectionchange===null}catch{}finally{e.onselectionchange=t}return!1},Xi=Ma(document),Zi=!!_a;function br(r,e){let t=ka(e);r.on=t.on,r.off=t.off,r.notify=t.notify}function ka(r){let e={};function t(i,u){i.split(" ").forEach(p=>{e[p]=e[p]||[],e[p].unshift(u)})}function n(i,u){let p=e[i];if(!p)return;let o=p.indexOf(u);o<0||p.splice(o,1)}return{on(i,u){if(arguments.length===2)t(i,u);else if(arguments.length===1)for(let p in i)t(p,i[p]);return this},off(i,u){arguments.length===2?n(i,u):arguments.length===1?e[i]=[]:e={}},notify(i,u){let p=Array.from(arguments);if(r?(u=i,i=r,p.splice(0,1)):p.splice(0,2),this.switchContext){let c=this.switchContext.events.shift();u!==c&&(this.switchContext=void 0)}let o=e[u];o&&o.every(c=>c.apply(i,p)!==!1)}}}var oo=st(lt());var eo=st(lt());function ii(r){let e=r.pageXOffset!==void 0?r.pageXOffset:(r.document.documentElement||r.document.body.parentNode||r.document.body).scrollLeft,t=r.pageYOffset!==void 0?r.pageYOffset:(r.document.documentElement||r.document.body.parentNode||r.document.body).scrollTop;return{x:e,y:t}}var Pe=class{static findHost(e,t){return Ot(e,t)}constructor(e,t){this.setHost(e),this.range=t,this.isCursor=!0}getTags(e){return Nt(this.host,this.range,e)}getTagNames(e){return Vn(this.getTags(e))}getTagsByName(e){return Wn(this.host,this.range,e)}getInnerTags(e){return Qr(this.range,e)}getContainedTags(e){return jn(this.range,e)}getAncestorTags(e){return Kr(this.host,this.range,e)}isAtEnd(){return Vr(this.host,this.range.endContainer,this.range.endOffset)}isAtTextEnd(){return Gt(this.host,this.range.endContainer,this.range.endOffset)}isAtLastLine(){let e=this.win.document.createRange();e.selectNodeContents(this.host),e.collapse(!1);let t=Jr(e,this.win),n=Jr(this.range.nativeRange,this.win);return Ji(t.bottom,n.bottom)}isAtFirstLine(){let e=this.win.document.createRange();e.selectNodeContents(this.host),e.collapse(!0);let t=Jr(e,this.win),n=Jr(this.range.nativeRange,this.win);return Ji(t.top,n.top)}isAtBeginning(){return Ut(this.host,this.range.startContainer,this.range.startOffset)}insertBefore(e){if(Nn(e)&&(e=wt(e)),qr(e))return;e=this.adoptElement(e);let t=e;if(e.nodeType===11){let n=e.childNodes.length-1;t=e.childNodes[n]}this.range.insertNode(e),this.range.setStartAfter(t),this.range.setEndAfter(t)}insertAfter(e){Nn(e)&&(e=wt(e)),!qr(e)&&(e=this.adoptElement(e),this.range.insertNode(e))}setSelection(){this.setVisibleSelection()}setVisibleSelection(){if(this.win.document.activeElement!==this.host){let{x:e,y:t}=ii(this.win);this.win.scrollTo(e,t)}eo.default.getSelection(this.win).setSingleRange(this.range)}before(){let e=this.range.cloneRange();return e.collapse(!0),e.setStartBefore(this.host),Gr(e)}textBefore(){let e=this.range.cloneRange();return e.collapse(!0),e.setStartBefore(this.host),e.toString()}beforeHtml(){return mr(this.before())}after(){let e=this.range.cloneRange();return e.collapse(!1),e.setEndAfter(this.host),Gr(e)}textAfter(){let e=this.range.cloneRange();return e.collapse(!1),e.setEndAfter(this.host),e.toString()}afterHtml(){return mr(this.after())}getBoundingClientRect(){return this.range.nativeRange.getBoundingClientRect()}getCoordinates(e="absolute"){let t=this.range.nativeRange.getBoundingClientRect();if(e==="fixed")return t;let{x:n,y:i}=ii(this.win);return{top:t.top+i,bottom:t.bottom+i,left:t.left+n,right:t.right+n,height:t.height,width:t.width}}moveBefore(e){if(this.updateHost(e),this.range.setStartBefore(e),this.range.setEndBefore(e),this.isSelection)return new Pe(this.host,this.range)}moveAfter(e){if(this.updateHost(e),this.range.setStartAfter(e),this.range.setEndAfter(e),this.isSelection)return new Pe(this.host,this.range)}moveAtBeginning(e=this.host){if(this.updateHost(e),this.range.selectNodeContents(e),this.range.collapse(!0),this.isSelection)return new Pe(this.host,this.range)}moveAtEnd(e=this.host){if(this.updateHost(e),this.range.selectNodeContents(e),this.range.collapse(!1),this.isSelection)return new Pe(this.host,this.range)}moveAtTextEnd(e){return this.moveAtEnd(hr(e))}setHost(e){e.jquery&&(e=e[0]),this.host=e,this.win=e==null?window:e.ownerDocument.defaultView}updateHost(e){let t=dr(e);t||ft("Can not set cursor outside of an editable block"),this.setHost(t)}retainVisibleSelection(e){this.save(),e(),this.restore(),this.setVisibleSelection()}save(){this.savedRangeInfo=zr(this.range),this.savedRangeInfo.host=this.host}restore(){this.savedRangeInfo||ft("Could not restore selection"),this.host=this.savedRangeInfo.host,this.range=$r(this.host,this.savedRangeInfo),this.savedRangeInfo=void 0}equals(e){return!(!e||!e.host||!e.host.isEqualNode(this.host)||!e.range||!e.range.equals(this.range))}createElement(e,t={}){let n=this.win.document.createElement(e);for(let i in t){let u=t[i];n.setAttribute(i,u)}return n}createTextNode(e){return this.win.document.createTextNode(e)}adoptElement(e){return Kt(e,this.win.document)}triggerChange(){let e=document.createEvent("HTMLEvents");e.initEvent("formatEditable",!0,!1),this.host.dispatchEvent(e)}};function Jr(r,e){if(r.startContainer.nodeType!==1)return r.getBoundingClientRect();let t=e.document.createElement("span");t.setAttribute("doc-editable","unwrap"),r.insertNode(t);let n=t.getBoundingClientRect();return t.remove(),n}function Ji(r,e){return r===e||Math.abs(r-e)<=2}var Ef=st(to());var ai=st(lt());var ro=st(lt());var Mt=class{constructor(e,t){this.current=this.previous=this.nextNode=this.root=e,this.iteratorFunc=this[t||"getNext"]}[Symbol.iterator](){return this}getNextTextNode(){let e;for(;e=this.getNext();)if(e.nodeType===3&&e.data!=="")return e}getPreviousTextNode(){let e;for(;e=this.getPrevious();)if(e.nodeType===3&&e.data!=="")return e}next(){let e=this.iteratorFunc();return e?{value:e}:{done:!0}}getNext(){let e=this.current=this.nextNode,t=this.nextNode=void 0;if(this.current)if(t=e.firstChild,t&&e.getAttribute("data-editable")!=="remove")this.nextNode=t;else for(;e!==this.root&&!(this.nextNode=e.nextSibling);)e=e.parentNode;return this.current}getPrevious(){let e=this.current=this.previous,t=this.previous=void 0;if(this.current)if(t=e.lastChild,t&&e.getAttribute("data-editable")!=="remove")this.previous=t;else for(;e!==this.root&&!(this.previous=e.previousSibling);)e=e.parentNode;return this.current}replaceCurrent(e){this.current=e,this.nextNode=void 0,this.previous=void 0;let t=this.current;for(;t!==this.root&&!(this.nextNode=t.nextSibling);)t=t.parentNode}};var gt={extractText(r){let e="";return Pa(r,t=>{e+=t}),e},highlightMatches(r,e){if(!e||e.length===0)return;let t=new Mt(r),n=0,i=0,u=e[n],p=[],o,c,d;for(;o=t.getNext();){if(o.nodeType===3&&o.data!=="")d=o;else if(o.nodeType===1&&o.nodeName==="BR"){i+=1;continue}else continue;let W=d.data,B=i+W.length;if(u.startIndex<B&&i<u.endIndex){let _=i<=u.startIndex,I=B>=u.endIndex;_&&(c=u.id||u.startIndex);let F;_?F=u.startIndex-i:F=0;let ce;I?ce=u.endIndex-i-F:ce=W.length-F;let Ee={element:d,text:W.substring(F,F+ce),offset:F,length:ce,isLastPortion:I,wordId:c};if(p.push(Ee),I){let $e=this.wrapMatch(p,u.marker,u.title);t.replaceCurrent($e),B=i+Ee.length+Ee.offset,p=[],n+=1,n<e.length&&(u=e[n])}}i=B}},wrapMatch(r,e,t){return r.map(n=>this.wrapPortion(n,e,t)).pop()},wrapPortion(r,e,t){let n=ro.default.createRange();n.setStart(r.element,r.offset),n.setEnd(r.element,r.offset+r.length);let i=e.cloneNode(!0);if(i.setAttribute("data-word-id",r.wordId),t&&i.setAttribute("title",t),n.surroundContents(i),i.nextSibling){let u=i.nextSibling;u.nodeType===3&&u.data===""&&u.remove()}return i}};function Pa(r,e){let t=new Mt(r),n;for(;n=t.getNext();)n.nodeType===3&&n.data!==""?e(n.data):n.nodeType===1&&n.nodeName==="BR"&&e(`
`)}var kt=class{constructor(e,t="word"){this.marker=e,this.matchMode=t}isElement(e){try{return e?e instanceof e.ownerDocument?.defaultView.HTMLElement:!1}catch{return typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object"}}findMatches(e,t){if(!(!e||e===""||!this.isElement(this.marker))&&t&&t.length>0)return this.searchMatches(e,t)}searchMatches(e,t){let i=(this.matchMode==="word"?La:Ia)(t);return[...e.matchAll(i)].map(p=>this.prepareMatch(p))}prepareMatch(e){let t,n;return this.matchMode==="word"?(t=e.index+e[1].length,n=e[2]):(t=e.index,n=e[0]),{startIndex:t,endIndex:t+n.length,match:n,marker:this.marker}}};function Ia(r){let t=`(${(r||[]).map(n=>io(n)).join("|")})`;return new RegExp(t,"g")}var no="\\u0041-\\u005A\\u0061-\\u007A\\u0030-\\u0039\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF\\u0100-\\u017F\\u0180-\\u024F";function La(r){let e=(r||[]).map(n=>io(n)),t=`([^${no}]|^)(${e.join("|")})(?=[^${no}]|$)`;return new RegExp(t,"g")}function io(r){return String(r).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function Fa(r,e){return Ot(r,"[data-editable]:not([data-word-id])")===e}var Sr={highlightText(r,e,t,n){if(this.hasHighlight(r,t))return;let i=gt.extractText(r),u=`<span class="highlight-${n}"></span>`,p=Sr.createMarkerNode(u,n,this.win),c=new kt(p,"text").findMatches(i,[e]);if(c&&c.length)return t&&(c[0].id=t),gt.highlightMatches(r,c),c[0].startIndex},highlightRange(r,e,t,n,i,u,p="comment"){this.hasHighlight(r,t)&&this.removeHighlight(r,t);let o=`<span class="highlight-${p}"></span>`,c=Sr.createMarkerNode(o,p,this.win),d=new kt(c,"text"),W=gt.extractText(r),B=d.findMatches(W,[e]),{actualStartIndex:_,actualEndIndex:I}=this.getIndex(B,n,i),F=ai.default.createRange();if(F.selectCharacters(r,_,I),!Fa(F.commonAncestorContainer,r))return-1;let ce=Sr.createMarkerNode(`<span class="highlight-${p}" data-word-id="${t}"></span>`,p,this.win),Ee=F.extractContents();return ce.appendChild(Ee),F.deleteContents(),F.insertNode(ce),Sr.cleanupStaleMarkerNodes(r,"comment"),u&&u.notify("change",r),_},updateHighlight(r,e,t,n){if(!document.documentElement.classList)return;let i=r.querySelectorAll(`[data-word-id="${e}"]`);for(let u of i)n&&u.classList.remove(n),t&&u.classList.add(t)},removeHighlight(r,e,t){let n=r.querySelectorAll(`[data-word-id="${e}"]`);for(let i of n)dt(i),r.normalize(),t&&t.notify("change",r)},hasHighlight(r,e){return!!r.querySelectorAll(`[data-word-id="${e}"]`).length},extractHighlightedRanges(r,e){let t="[data-word-id]";e&&(t+=`[data-highlight="${e}"]`);let n=r.querySelectorAll(t);if(!n.length)return;let i={};for(let p of n){let o=p.getAttribute("data-word-id");i[o]||(i[o]=r.querySelectorAll(`[data-word-id="${o}"]`))}let u={};for(let p in i){let o=this.extractMarkerNodePosition(r,i[p]);o&&(u[p]=o)}return u},extractMarkerNodePosition(r,e){let t=ai.default.createRange();e.length>1?(t.setStartBefore(e[0]),t.setEndAfter(e[e.length-1])):t.selectNode(e[0]);let n=t.toCharacterRange(r);return{start:n.start,end:n.end,text:t.text(),nativeRange:t.nativeRange}},cleanupStaleMarkerNodes(r,e){let t=r.querySelectorAll(`span[data-highlight="${e}"]`);for(let n of t)n.textContent.length||n.remove()},createMarkerNode(r,e,t){let n=Hr(r,t);return n.setAttribute("data-editable","ui-unwrap"),n.setAttribute("data-highlight",e),n},getIndex(r,e,t){let n=r.find(p=>p.startIndex>=e),i=n?n.startIndex:e,u=i?i+(t-e):t;return{actualStartIndex:i,actualEndIndex:u}}},at=Sr;var mt=class extends Pe{constructor(){super(...arguments),delete this.isCursor,this.isSelection=!0}text(){return this.range.toString()}html(){return this.range.toHtml()}isAllSelected(){return Ut(this.host,this.range.startContainer,this.range.startOffset)&&Gt(this.host,this.range.endContainer,this.range.endOffset)}getTextRange(){return this.range.toCharacterRange(this.host)}toString(){return this.range.toString()}isWrappable(){return vr(this.range)}getRects(){return this.range.nativeRange.getClientRects()}link(e,t={}){e&&(t.href=e);let n=this.createElement(K.linkMarkup.name,K.linkMarkup.attribs);for(let i in t){let u=t[i];u!==void 0&&(u===null?n.removeAttribute(i):n.setAttribute(i,u))}K.linkMarkup.trim&&this.trimRange(),this.forceWrap(n)}trimRange(){let e=this.range.toString(),t=e.search(/\S|$/),n=e.search(/\S[\s]+$/),i=n===-1?0:e.length-(n+1);this.range.setStart(this.range.startContainer,this.range.startOffset+t),this.range.setEnd(this.range.endContainer,this.range.endOffset-i)}unlink(){this.removeFormatting(K.linkMarkup.name)}toggleLink(e,t){let n=this.getTagsByName(K.linkMarkup.name);if(n.length>=1){let i=n[0];this.isExactSelection(i,"visible")?this.unlink():this.expandTo(i)}else this.link(e,t)}highlight({highlightId:e}){let t=this.textBefore(),n=this.text(),i='<span class="highlight-comment"></span>',u=at.createMarkerNode(i,this.win);u.setAttribute("data-match",n);let p={startIndex:t.length,endIndex:t.length+n.length,match:n,marker:u};gt.highlightMatches(this.host,[p])}toggle(e){e=this.adoptElement(e),this.range=zn(this.host,this.range,e),this.setSelection()}toggleCustom({tagName:e,attributes:t,trim:n=!1}){let i=this.createElement(e,t);n&&this.trimRange(),this.toggle(i)}makeCustom({tagName:e,attributes:t,trim:n=!1}){let i=this.createElement(e,t);n&&this.trimRange(),this.forceWrap(i)}makeBold(){let e=this.createElement(K.boldMarkup.name,K.boldMarkup.attribs);K.boldMarkup.trim&&this.trimRange(),this.forceWrap(e)}toggleBold(){let e=this.createElement(K.boldMarkup.name,K.boldMarkup.attribs);K.boldMarkup.trim&&this.trimRange(),this.toggle(e)}giveEmphasis(){let e=this.createElement(K.italicMarkup.name,K.italicMarkup.attribs);K.italicMarkup.trim&&this.trimRange(),this.forceWrap(e)}toggleEmphasis(){let e=this.createElement(K.italicMarkup.name,K.italicMarkup.attribs);K.italicMarkup.trim&&this.trimRange(),this.toggle(e)}makeUnderline(){let e=this.createElement(K.underlineMarkup.name,K.underlineMarkup.attribs);K.underlineMarkup.trim&&this.trimRange(),this.forceWrap(e)}toggleUnderline(){let e=this.createElement(K.underlineMarkup.name,K.underlineMarkup.attribs);K.underlineMarkup.trim&&this.trimRange(),this.toggle(e)}insertCharacter(e){let t=this.deleteContent(),n=t.createTextNode(e);return t.insertBefore(n),t.setSelection(),t}surround(e,t){this.range=Kn(this.host,this.range,e,t),this.setSelection()}removeSurround(e,t){this.range=Qt(this.host,this.range,e),this.range=Qt(this.host,this.range,t),this.setSelection()}removeChars(e=[]){for(let t=0;t<e.length;t++){let n=e[t];this.range=Qt(this.host,this.range,n)}this.setSelection()}toggleSurround(e,t){this.containsString(e)&&this.containsString(t)?this.removeSurround(e,t):this.surround(e,t)}removeFormatting(e){this.range=$n(this.host,this.range,e),this.setSelection()}deleteExactSurroundingTags(){let e=this.getAncestorTags().reverse();for(let t of e)if(this.isExactSelection(t)){t.remove();break}return new mt(this.host,this.range)}deleteContainedTags(){return this.getContainedTags().forEach(t=>t.remove()),new mt(this.host,this.range)}deleteContent(){return this.range.deleteContents(),new Pe(this.host,this.range)}expandTo(e){this.range=qn(this.host,this.range,e),this.setSelection()}collapseAtBeginning(e){return this.range.collapse(!0),this.setSelection(),new Pe(this.host,this.range)}collapseAtEnd(e){return this.range.collapse(!1),this.setSelection(),new Pe(this.host,this.range)}forceWrap(e){e=this.adoptElement(e),this.range=Xr(this.host,this.range,e),this.setSelection()}isExactSelection(e,t){return Yr(this.range,e,t)}containsString(e){return Zr(this.range,e)}deleteCharacter(e){this.range=Qt(this.host,this.range,e),this.setSelection()}};var Bt=class{constructor(e,t){this.host=e&&e.jquery?e[0]:e,this.range=t,this.isAnythingSelected=t!==void 0,this.isCursor=this.isAnythingSelected&&t.collapsed,this.isSelection=this.isAnythingSelected&&!this.isCursor}getCursor(){if(this.isCursor)return new Pe(this.host,this.range)}getSelection(){if(this.isSelection)return new mt(this.host,this.range)}forceCursor(){return this.isSelection?this.getSelection().deleteContent():this.getCursor()}isDifferentFrom(e=new Bt){let t=this.range,n=e.range;return t&&n?!t.equals(n):!(!t&&!n)}};var xr=class{constructor(e,t){this.dispatcher=e,this.win=t||window,this.rangySelection=void 0,this.currentSelection=void 0,this.currentRange=void 0}syncSelection(){try{this.rangySelection=oo.default.getSelection(this.win)}catch{return!1}return!0}getRangeContainer(){let e=this.syncSelection();if(this.rangySelection.rangeCount&&e){let t=this.rangySelection.getRangeAt(0),n=dr(t.commonAncestorContainer);if(n)return new Bt(n,t)}return new Bt}getFreshRange(){return this.getRangeContainer()}getFreshSelection(){let e=this.getRangeContainer();return e.isCursor?e.getCursor(this.win):e.getSelection(this.win)}getSelection(){return this.currentSelection}forceCursor(){return this.getRangeContainer().forceCursor()}selectionChanged(){let e=this.getRangeContainer();if(e.isDifferentFrom(this.currentRange)){let t=this.currentSelection;this.currentRange=e,t&&(t.isCursor&&!this.currentRange.isCursor?this.dispatcher.notify("cursor",t.host):t.isSelection&&!this.currentRange.isSelection&&this.dispatcher.notify("selection",t.host)),this.currentRange.isCursor?(this.currentSelection=new Pe(this.currentRange.host,this.currentRange.range),this.dispatcher.notify("cursor",this.currentSelection.host,this.currentSelection)):this.currentRange.isSelection?(this.currentSelection=new mt(this.currentRange.host,this.currentRange.range),this.dispatcher.notify("selection",this.currentSelection.host,this.currentSelection)):this.currentSelection=void 0}}};var so=st(lt());var vt=class{constructor(e){br(this),this.selectionWatcher=e}dispatchKeyEvent(e,t,n){switch(e.keyCode){case this.key.left:return this.notify(t,"left",e);case this.key.right:return this.notify(t,"right",e);case this.key.up:return this.notify(t,"up",e);case this.key.down:return this.notify(t,"down",e);case this.key.tab:return e.shiftKey?this.notify(t,"shiftTab",e):this.notify(t,"tab",e);case this.key.esc:return this.notify(t,"esc",e);case this.key.backspace:return this.preventContenteditableBug(t,e),this.notify(t,"backspace",e);case this.key.delete:return this.preventContenteditableBug(t,e),this.notify(t,"delete",e);case this.key.enter:return e.shiftKey?this.notify(t,"shiftEnter",e):this.notify(t,"enter",e);case this.key.ctrl:case this.key.shift:case this.key.alt:return;case 224:case 17:case 91:case 93:return;default:if(e.keyCode===this.key.b&&(e.ctrlKey||e.metaKey))return this.notify(t,"bold",e);if(e.keyCode===this.key.i&&(e.ctrlKey||e.metaKey))return this.notify(t,"italic",e);if(this.preventContenteditableBug(t,e),!n)return;if(!e.ctrlKey&&!e.metaKey)return this.notify(t,"character",e)}}preventContenteditableBug(e,t){if(!Zi||t.ctrlKey||t.metaKey)return;let n=this.selectionWatcher.getFreshRange();if(!n.isSelection)return;let i=vt.getNodeToRemove(n.range,e);i&&i.remove()}static getNodeToRemove(e,t){if(e.startOffset!==0)return;let n=e.startContainer;if(n.nodeType===3&&(n=n.parentNode),n===t)return;let i=so.default.createRange();if(i.setStartBefore(n.firstChild),i.setEndAfter(n.lastChild),i.containsRange(e))return;if(e.startContainer.nodeType===3){let p=[3,1],o=n.firstChild;do if(p.indexOf(o.nodeType)!==-1)break;while(o=o.nextSibling);if(o!==e.startContainer)return}let u=e.cloneRange();return u.setStartBefore(n),vt.getNodeToRemove(u,t)||n}};vt.key=vt.prototype.key={left:37,up:38,right:39,down:40,tab:9,esc:27,backspace:8,delete:46,enter:13,shift:16,ctrl:17,alt:18,b:66,i:73};var en=!1,wr=class{constructor(e){let t=e.win;br(this,e),this.supportsInputEvent=!1,this.document=t.document,this.config=e.config,this.editable=e,this.editableSelector=e.editableSelector,this.selectionWatcher=new xr(this,t),this.keyboard=new vt(this.selectionWatcher),this.activeListeners=[],this.setup(),this.getEditableBlockByEvent=n=>Ot(n.target,e.editableSelector)}setupDocumentListener(e,t,n=!1){let i={event:e,listener:t.bind(this),capture:n};return this.activeListeners.push(i),this.document.addEventListener(e,i.listener,n),this}setup(){this.setupKeyboardEvents(),this.setupEventListeners()}unload(){this.off();for(let e of this.activeListeners)this.document.removeEventListener(e.event,e.listener,e.capture);this.activeListeners.length=0}suspend(){if(!this.suspended){this.suspended=!0;for(let e of this.activeListeners)this.document.removeEventListener(e.event,e.listener,e.capture);this.activeListeners.length=0}}continue(){this.suspended&&(this.suspended=!1,this.setupEventListeners())}setupEventListeners(){this.setupElementListeners(),this.setupKeydownListener(),Xi?this.setupSelectionChangeListeners():this.setupSelectionChangeFallbackListeners()}setupElementListeners(){this.setupDocumentListener("focus",function(t){let n=this.getEditableBlockByEvent(t);n&&(t.target.getAttribute(K.pastingAttribute)||(this.selectionWatcher.syncSelection(),this.notify("focus",n)))},!0).setupDocumentListener("blur",function(t){let n=this.getEditableBlockByEvent(t);n&&(n.getAttribute(K.pastingAttribute)||this.notify("blur",n))},!0).setupDocumentListener("copy",function(t){let n=this.getEditableBlockByEvent(t);if(!n)return;let i=this.selectionWatcher.getFreshSelection();i&&i.isSelection&&this.notify("clipboard",n,"copy",i)}).setupDocumentListener("cut",function(t){let n=this.getEditableBlockByEvent(t);if(!n)return;let i=this.selectionWatcher.getFreshSelection();i&&i.isSelection&&(this.notify("clipboard",n,"cut",i),this.triggerChangeEvent(n))}).setupDocumentListener("paste",function(t){let n=this.getEditableBlockByEvent(t);if(!n)return;t.preventDefault();let i=this.selectionWatcher.getFreshSelection(),u=t.clipboardData.getData("text/html")||t.clipboardData.getData("text/plain"),{blocks:p,cursor:o}=Gi(n,i,u);p.length?(Si(t.target.innerText)&&o.retainVisibleSelection(()=>{n.innerHTML=bi(n.innerHTML,"&nbsp;"," ")}),this.notify("paste",n,p,o),this.notify("change",n)):o.setVisibleSelection()}).setupDocumentListener("input",function(t){let n=this.getEditableBlockByEvent(t);n&&(en?this.notify("change",n):en=!0)}).setupDocumentListener("formatEditable",function(t){let n=this.getEditableBlockByEvent(t);n&&this.notify("change",n)})}triggerChangeEvent(e){en||this.notify("change",e)}dispatchSwitchEvent(e,t,n){if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;let i=this.selectionWatcher.getFreshSelection();!i||i.isSelection||(this.switchContext?this.switchContext.events=["cursor"]:this.switchContext={positionX:i.getBoundingClientRect().left,events:["cursor"]},n==="up"&&i.isAtFirstLine()&&(e.preventDefault(),e.stopPropagation(),this.switchContext.events=["switch","blur","focus","cursor"],this.notify("switch",t,n,i)),n==="down"&&i.isAtLastLine()&&(e.preventDefault(),e.stopPropagation(),this.switchContext.events=["switch","blur","focus","cursor"],this.notify("switch",t,n,i)))}setupKeydownListener(){this.setupDocumentListener("keydown",function(e){let t=this.getEditableBlockByEvent(e);if(!t)return;let n=!en;this.keyboard.dispatchKeyEvent(e,t,n)},!0)}setupKeyboardEvents(){let e=this;this.keyboard.on("up",function(t){e.dispatchSwitchEvent(t,this,"up")}).on("down",function(t){e.dispatchSwitchEvent(t,this,"down")}).on("backspace",function(t){let n=e.selectionWatcher.getFreshRange();if(!n.isCursor)return e.triggerChangeEvent(this);let i=n.getCursor();if(!i.isAtBeginning())return e.triggerChangeEvent(this);t.preventDefault(),t.stopPropagation(),e.notify("merge",this,"before",i)}).on("delete",function(t){let n=e.selectionWatcher.getFreshRange();if(!n.isCursor)return e.triggerChangeEvent(this);let i=n.getCursor();if(!i.isAtTextEnd())return e.triggerChangeEvent(this);t.preventDefault(),t.stopPropagation(),e.notify("merge",this,"after",i)}).on("enter",function(t){t.preventDefault(),t.stopPropagation();let i=e.selectionWatcher.getFreshRange().forceCursor();i.isAtTextEnd()?e.notify("insert",this,"after",i):i.isAtBeginning()?e.notify("insert",this,"before",i):e.notify("split",this,i.before(),i.after(),i)}).on("shiftEnter",function(t){t.preventDefault(),t.stopPropagation();let n=e.selectionWatcher.forceCursor();e.notify("newline",this,n)}).on("bold",function(t){t.preventDefault(),t.stopPropagation();let n=e.selectionWatcher.getFreshSelection();n.isSelection&&e.notify("toggleBold",n)}).on("italic",function(t){t.preventDefault(),t.stopPropagation();let n=e.selectionWatcher.getFreshSelection();n.isSelection&&e.notify("toggleEmphasis",n)}).on("character",function(t){e.notify("change",this)})}setupSelectionChangeListeners(){let e=!1,t=!1,n=this.selectionWatcher;this.setupDocumentListener("selectionchange",i=>{let u=this.selectionWatcher.getFreshSelection();u&&u.isSelection&&u.isAtBeginning()&&u.isAtEnd()?this.notify("selectToBoundary",u.host,i,"both"):u&&u.isSelection&&u.isAtBeginning()?this.notify("selectToBoundary",u.host,i,"start"):u&&u.isSelection&&u.isAtEnd()&&this.notify("selectToBoundary",u.host,i,"end"),t?e=!0:n.selectionChanged()}),this.setupDocumentListener("mousedown",function(i){this.getEditableBlockByEvent(i)&&(this.config.mouseMoveSelectionChanges===!1&&(t=!0,setTimeout(()=>n.selectionChanged(),0)),this.document.addEventListener("mouseup",()=>{t=!1,e&&(e=!1,n.selectionChanged())},{capture:!0,once:!0}))})}setupSelectionChangeFallbackListeners(){this.setupDocumentListener("mouseup",()=>{setTimeout(()=>this.selectionWatcher.selectionChanged(),0)}),this.setupDocumentListener("keyup",e=>{this.getEditableBlockByEvent(e)&&this.selectionWatcher.selectionChanged()})}};function Da(){this.__data__=[],this.size=0}var ao=Da;function Wa(r,e){return r===e||r!==r&&e!==e}var Pt=Wa;function Ha(r,e){for(var t=r.length;t--;)if(Pt(r[t][0],e))return t;return-1}var It=Ha;var ja=Array.prototype,Va=ja.splice;function qa(r){var e=this.__data__,t=It(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():Va.call(e,t,1),--this.size,!0}var co=qa;function za(r){var e=this.__data__,t=It(e,r);return t<0?void 0:e[t][1]}var uo=za;function $a(r){return It(this.__data__,r)>-1}var lo=$a;function Ua(r,e){var t=this.__data__,n=It(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}var fo=Ua;function Yt(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Yt.prototype.clear=ao;Yt.prototype.delete=co;Yt.prototype.get=uo;Yt.prototype.has=lo;Yt.prototype.set=fo;var Lt=Yt;function Ga(){this.__data__=new Lt,this.size=0}var ho=Ga;function Ka(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}var po=Ka;function Qa(r){return this.__data__.get(r)}var go=Qa;function Ya(r){return this.__data__.has(r)}var mo=Ya;var Xa=typeof global=="object"&&global&&global.Object===Object&&global,tn=Xa;var Za=typeof self=="object"&&self&&self.Object===Object&&self,Ja=tn||Za||Function("return this")(),it=Ja;var ec=it.Symbol,Xt=ec;var vo=Object.prototype,tc=vo.hasOwnProperty,rc=vo.toString,Nr=Xt?Xt.toStringTag:void 0;function nc(r){var e=tc.call(r,Nr),t=r[Nr];try{r[Nr]=void 0;var n=!0}catch{}var i=rc.call(r);return n&&(e?r[Nr]=t:delete r[Nr]),i}var yo=nc;var ic=Object.prototype,oc=ic.toString;function sc(r){return oc.call(r)}var Co=sc;var ac="[object Null]",cc="[object Undefined]",bo=Xt?Xt.toStringTag:void 0;function uc(r){return r==null?r===void 0?cc:ac:bo&&bo in Object(r)?yo(r):Co(r)}var Ft=uc;function lc(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var tt=lc;var fc="[object AsyncFunction]",dc="[object Function]",hc="[object GeneratorFunction]",pc="[object Proxy]";function gc(r){if(!tt(r))return!1;var e=Ft(r);return e==dc||e==hc||e==fc||e==pc}var Zt=gc;var mc=it["__core-js_shared__"],rn=mc;var So=function(){var r=/[^.]+$/.exec(rn&&rn.keys&&rn.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function vc(r){return!!So&&So in r}var xo=vc;var yc=Function.prototype,Cc=yc.toString;function bc(r){if(r!=null){try{return Cc.call(r)}catch{}try{return r+""}catch{}}return""}var wo=bc;var Sc=/[\\^$.*+?()[\]{}|]/g,xc=/^\[object .+?Constructor\]$/,wc=Function.prototype,Nc=Object.prototype,Rc=wc.toString,Ec=Nc.hasOwnProperty,Tc=RegExp("^"+Rc.call(Ec).replace(Sc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ac(r){if(!tt(r)||xo(r))return!1;var e=Zt(r)?Tc:xc;return e.test(wo(r))}var No=Ac;function Oc(r,e){return r?.[e]}var Ro=Oc;function _c(r,e){var t=Ro(r,e);return No(t)?t:void 0}var Jt=_c;var Mc=Jt(it,"Map"),nn=Mc;var kc=Jt(Object,"create"),Rt=kc;function Bc(){this.__data__=Rt?Rt(null):{},this.size=0}var Eo=Bc;function Pc(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var To=Pc;var Ic="__lodash_hash_undefined__",Lc=Object.prototype,Fc=Lc.hasOwnProperty;function Dc(r){var e=this.__data__;if(Rt){var t=e[r];return t===Ic?void 0:t}return Fc.call(e,r)?e[r]:void 0}var Ao=Dc;var Wc=Object.prototype,Hc=Wc.hasOwnProperty;function jc(r){var e=this.__data__;return Rt?e[r]!==void 0:Hc.call(e,r)}var Oo=jc;var Vc="__lodash_hash_undefined__";function qc(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Rt&&e===void 0?Vc:e,this}var _o=qc;function er(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}er.prototype.clear=Eo;er.prototype.delete=To;er.prototype.get=Ao;er.prototype.has=Oo;er.prototype.set=_o;var ci=er;function zc(){this.size=0,this.__data__={hash:new ci,map:new(nn||Lt),string:new ci}}var Mo=zc;function $c(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var ko=$c;function Uc(r,e){var t=r.__data__;return ko(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Dt=Uc;function Gc(r){var e=Dt(this,r).delete(r);return this.size-=e?1:0,e}var Bo=Gc;function Kc(r){return Dt(this,r).get(r)}var Po=Kc;function Qc(r){return Dt(this,r).has(r)}var Io=Qc;function Yc(r,e){var t=Dt(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}var Lo=Yc;function tr(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}tr.prototype.clear=Mo;tr.prototype.delete=Bo;tr.prototype.get=Po;tr.prototype.has=Io;tr.prototype.set=Lo;var Fo=tr;var Xc=200;function Zc(r,e){var t=this.__data__;if(t instanceof Lt){var n=t.__data__;if(!nn||n.length<Xc-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new Fo(n)}return t.set(r,e),this.size=t.size,this}var Do=Zc;function rr(r){var e=this.__data__=new Lt(r);this.size=e.size}rr.prototype.clear=ho;rr.prototype.delete=po;rr.prototype.get=go;rr.prototype.has=mo;rr.prototype.set=Do;var Wo=rr;var Jc=function(){try{var r=Jt(Object,"defineProperty");return r({},"",{}),r}catch{}}(),nr=Jc;function eu(r,e,t){e=="__proto__"&&nr?nr(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var ir=eu;function tu(r,e,t){(t!==void 0&&!Pt(r[e],t)||t===void 0&&!(e in r))&&ir(r,e,t)}var Rr=tu;function ru(r){return function(e,t,n){for(var i=-1,u=Object(e),p=n(e),o=p.length;o--;){var c=p[r?o:++i];if(t(u[c],c,u)===!1)break}return e}}var Ho=ru;var nu=Ho(),jo=nu;var $o=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Vo=$o&&typeof module=="object"&&module&&!module.nodeType&&module,iu=Vo&&Vo.exports===$o,qo=iu?it.Buffer:void 0,zo=qo?qo.allocUnsafe:void 0;function ou(r,e){if(e)return r.slice();var t=r.length,n=zo?zo(t):new r.constructor(t);return r.copy(n),n}var Uo=ou;var su=it.Uint8Array,ui=su;function au(r){var e=new r.constructor(r.byteLength);return new ui(e).set(new ui(r)),e}var Go=au;function cu(r,e){var t=e?Go(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var Ko=cu;function uu(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var Qo=uu;var Yo=Object.create,lu=function(){function r(){}return function(e){if(!tt(e))return{};if(Yo)return Yo(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}(),Xo=lu;function fu(r,e){return function(t){return r(e(t))}}var Zo=fu;var du=Zo(Object.getPrototypeOf,Object),on=du;var hu=Object.prototype;function pu(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||hu;return r===t}var sn=pu;function gu(r){return typeof r.constructor=="function"&&!sn(r)?Xo(on(r)):{}}var Jo=gu;function mu(r){return r!=null&&typeof r=="object"}var yt=mu;var vu="[object Arguments]";function yu(r){return yt(r)&&Ft(r)==vu}var li=yu;var es=Object.prototype,Cu=es.hasOwnProperty,bu=es.propertyIsEnumerable,Su=li(function(){return arguments}())?li:function(r){return yt(r)&&Cu.call(r,"callee")&&!bu.call(r,"callee")},Er=Su;var xu=Array.isArray,Tr=xu;var wu=9007199254740991;function Nu(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=wu}var an=Nu;function Ru(r){return r!=null&&an(r.length)&&!Zt(r)}var or=Ru;function Eu(r){return yt(r)&&or(r)}var ts=Eu;function Tu(){return!1}var rs=Tu;var os=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ns=os&&typeof module=="object"&&module&&!module.nodeType&&module,Au=ns&&ns.exports===os,is=Au?it.Buffer:void 0,Ou=is?is.isBuffer:void 0,_u=Ou||rs,cn=_u;var Mu="[object Object]",ku=Function.prototype,Bu=Object.prototype,ss=ku.toString,Pu=Bu.hasOwnProperty,Iu=ss.call(Object);function Lu(r){if(!yt(r)||Ft(r)!=Mu)return!1;var e=on(r);if(e===null)return!0;var t=Pu.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&ss.call(t)==Iu}var as=Lu;var Fu="[object Arguments]",Du="[object Array]",Wu="[object Boolean]",Hu="[object Date]",ju="[object Error]",Vu="[object Function]",qu="[object Map]",zu="[object Number]",$u="[object Object]",Uu="[object RegExp]",Gu="[object Set]",Ku="[object String]",Qu="[object WeakMap]",Yu="[object ArrayBuffer]",Xu="[object DataView]",Zu="[object Float32Array]",Ju="[object Float64Array]",el="[object Int8Array]",tl="[object Int16Array]",rl="[object Int32Array]",nl="[object Uint8Array]",il="[object Uint8ClampedArray]",ol="[object Uint16Array]",sl="[object Uint32Array]",_e={};_e[Zu]=_e[Ju]=_e[el]=_e[tl]=_e[rl]=_e[nl]=_e[il]=_e[ol]=_e[sl]=!0;_e[Fu]=_e[Du]=_e[Yu]=_e[Wu]=_e[Xu]=_e[Hu]=_e[ju]=_e[Vu]=_e[qu]=_e[zu]=_e[$u]=_e[Uu]=_e[Gu]=_e[Ku]=_e[Qu]=!1;function al(r){return yt(r)&&an(r.length)&&!!_e[Ft(r)]}var cs=al;function cl(r){return function(e){return r(e)}}var us=cl;var ls=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ar=ls&&typeof module=="object"&&module&&!module.nodeType&&module,ul=Ar&&Ar.exports===ls,fi=ul&&tn.process,ll=function(){try{var r=Ar&&Ar.require&&Ar.require("util").types;return r||fi&&fi.binding&&fi.binding("util")}catch{}}(),di=ll;var fs=di&&di.isTypedArray,fl=fs?us(fs):cs,un=fl;function dl(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}var Or=dl;var hl=Object.prototype,pl=hl.hasOwnProperty;function gl(r,e,t){var n=r[e];(!(pl.call(r,e)&&Pt(n,t))||t===void 0&&!(e in r))&&ir(r,e,t)}var ds=gl;function ml(r,e,t,n){var i=!t;t||(t={});for(var u=-1,p=e.length;++u<p;){var o=e[u],c=n?n(t[o],r[o],o,t,r):void 0;c===void 0&&(c=r[o]),i?ir(t,o,c):ds(t,o,c)}return t}var hs=ml;function vl(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var ps=vl;var yl=9007199254740991,Cl=/^(?:0|[1-9]\d*)$/;function bl(r,e){var t=typeof r;return e=e??yl,!!e&&(t=="number"||t!="symbol"&&Cl.test(r))&&r>-1&&r%1==0&&r<e}var ln=bl;var Sl=Object.prototype,xl=Sl.hasOwnProperty;function wl(r,e){var t=Tr(r),n=!t&&Er(r),i=!t&&!n&&cn(r),u=!t&&!n&&!i&&un(r),p=t||n||i||u,o=p?ps(r.length,String):[],c=o.length;for(var d in r)(e||xl.call(r,d))&&!(p&&(d=="length"||i&&(d=="offset"||d=="parent")||u&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||ln(d,c)))&&o.push(d);return o}var gs=wl;function Nl(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var ms=Nl;var Rl=Object.prototype,El=Rl.hasOwnProperty;function Tl(r){if(!tt(r))return ms(r);var e=sn(r),t=[];for(var n in r)n=="constructor"&&(e||!El.call(r,n))||t.push(n);return t}var vs=Tl;function Al(r){return or(r)?gs(r,!0):vs(r)}var fn=Al;function Ol(r){return hs(r,fn(r))}var ys=Ol;function _l(r,e,t,n,i,u,p){var o=Or(r,t),c=Or(e,t),d=p.get(c);if(d){Rr(r,t,d);return}var W=u?u(o,c,t+"",r,e,p):void 0,B=W===void 0;if(B){var _=Tr(c),I=!_&&cn(c),F=!_&&!I&&un(c);W=c,_||I||F?Tr(o)?W=o:ts(o)?W=Qo(o):I?(B=!1,W=Uo(c,!0)):F?(B=!1,W=Ko(c,!0)):W=[]:as(c)||Er(c)?(W=o,Er(o)?W=ys(o):(!tt(o)||Zt(o))&&(W=Jo(c))):B=!1}B&&(p.set(c,W),i(W,c,n,u,p),p.delete(c)),Rr(r,t,W)}var Cs=_l;function bs(r,e,t,n,i){r!==e&&jo(e,function(u,p){if(i||(i=new Wo),tt(u))Cs(r,e,p,t,bs,n,i);else{var o=n?n(Or(r,p),u,p+"",r,e,i):void 0;o===void 0&&(o=u),Rr(r,p,o)}},fn)}var Ss=bs;function Ml(r){return r}var dn=Ml;function kl(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}var xs=kl;var ws=Math.max;function Bl(r,e,t){return e=ws(e===void 0?r.length-1:e,0),function(){for(var n=arguments,i=-1,u=ws(n.length-e,0),p=Array(u);++i<u;)p[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=t(p),xs(r,this,o)}}var Ns=Bl;function Pl(r){return function(){return r}}var Rs=Pl;var Il=nr?function(r,e){return nr(r,"toString",{configurable:!0,enumerable:!1,value:Rs(e),writable:!0})}:dn,Es=Il;var Ll=800,Fl=16,Dl=Date.now;function Wl(r){var e=0,t=0;return function(){var n=Dl(),i=Fl-(n-t);if(t=n,i>0){if(++e>=Ll)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}var Ts=Wl;var Hl=Ts(Es),As=Hl;function jl(r,e){return As(Ns(r,e,dn),r+"")}var Os=jl;function Vl(r,e,t){if(!tt(t))return!1;var n=typeof e;return(n=="number"?or(t)&&ln(e,t.length):n=="string"&&e in t)?Pt(t[e],r):!1}var _s=Vl;function ql(r){return Os(function(e,t){var n=-1,i=t.length,u=i>1?t[i-1]:void 0,p=i>2?t[2]:void 0;for(u=r.length>3&&typeof u=="function"?(i--,u):void 0,p&&_s(t[0],t[1],p)&&(u=i<3?void 0:u,i=1),e=Object(e);++n<i;){var o=t[n];o&&r(e,o,n,u)}return e})}var Ms=ql;var zl=Ms(function(r,e,t){Ss(r,e,t)}),ks=zl;var _r=class{constructor(e){this.spellcheckService=e}check(e,t){if(!e)return t(null);let n=Ln(e);this.spellcheckService(n,i=>{i&&i.length>0?t(null,i):t(null)})}};var $l={A0:"no-break space",2e3:"en quad",2001:"em quad",2002:"en space",2003:"em space",2004:"three-per-em space",2005:"four-per-em space",2006:"six-per-em space",2007:"figure space",2008:"punctuation space",2009:"thin space","200A":"hair space","202F":"narrow no-break space","205F":"medium mathematical space",3e3:"ideographic space"},Ul="\\u2000-\\u200A\\u202F\\u205F\\u3000",Mr=class{constructor(e){this.marker=e}findMatches(e){if(!e)return;let t=`[${Ul}]`;t=new RegExp(t,"g");let n=[],i;for(;i=t.exec(e);)n.push(i);return n.map(u=>this.prepareMatch(u))}prepareMatch(e){let t=e.index,n=Gl(e[0]),i=$l[n];return{startIndex:t,endIndex:t+e.length,match:e[0],title:`${i} (\\u${n})`,marker:this.marker}}};function Gl(r){return`${r.charCodeAt(0).toString(16).toUpperCase()}`}var kr=class{constructor(){this.matches=[]}addMatches(e,t){!t||!t.length||(this.matches=Kl(this.matches,t))}};function Kl(r,e){let t,n=r.length,i=e.length,u=-1,p=[],o={a1:r,i1:0,a2:e,i2:0};for(;o.i1<n||o.i2<i;)t=Ql(o),t.startIndex>=u&&p.push(t),u=t.endIndex;return p}function Ql(r){let e=r.i1,t=r.i2,n=r.a1[e],i=r.a2[t];return n&&i&&n.startIndex<i.startIndex?(r.i1=e+1,n):n&&i?(r.i2=t+1,i):n?(r.i1=e+1,n):i?(r.i2=t+1,i):void 0}var Br=class{constructor(e,t,n){this.editable=e,this.win=e.win,this.focusedEditableHost=void 0,this.currentlyCheckedEditableHost=void 0,this.timeout={};let i={checkOnInit:!1,checkOnFocus:!1,checkOnChange:!0,throttle:1e3,removeOnCorrection:!0,spellcheck:{marker:'<span class="highlight-spellcheck"></span>',throttle:1e3,spellcheckService:function(){}},whitespace:{marker:'<span class="highlight-whitespace"></span>'}};this.config=ks({},i,t);let u=this.config.spellcheck.spellcheckService,p=this.config.spellcheck.marker,o=this.config.whitespace.marker,c=at.createMarkerNode(p,"spellcheck",this.win),d=at.createMarkerNode(o,"spellcheck",this.win);this.spellcheckService=new _r(u),this.spellcheck=new kt(c),this.whitespace=new Mr(d),this.setupListeners()}setupListeners(){this.config.checkOnFocus&&(this.editable.on("focus",(...e)=>this.onFocus(...e)),this.editable.on("blur",(...e)=>this.onBlur(...e))),(this.config.checkOnChange||this.config.removeOnCorrection)&&this.editable.on("change",(...e)=>this.onChange(...e)),this.config.checkOnInit&&this.editable.on("init",(...e)=>this.onInit(...e))}onInit(e){this.highlight(e)}onFocus(e){this.focusedEditableHost!==e&&(this.focusedEditableHost=e,this.editableHasChanged(e))}onBlur(e){this.focusedEditableHost===e&&(this.focusedEditableHost=void 0)}onChange(e){this.config.checkOnChange&&this.editableHasChanged(e,this.config.throttle),this.config.removeOnCorrection&&this.removeHighlightsAtCursor(e)}editableHasChanged(e,t){this.timeout.id&&this.timeout.editableHost===e&&clearTimeout(this.timeout.id);let n=setTimeout(()=>{this.highlight(e),this.timeout={}},t||0);this.timeout={id:n,editableHost:e}}highlight(e){let t=gt.extractText(e);this.spellcheckService.check(t,(n,i)=>{if(n)return;t=gt.extractText(e);let u=new kr,p=this.spellcheck.findMatches(t,i);u.addMatches("spellcheck",p),p=this.whitespace.findMatches(t),u.addMatches("whitespace",p),this.safeHighlightMatches(e,u.matches)})}safeHighlightMatches(e,t){let n=this.editable.getSelection(e);n?n.retainVisibleSelection(()=>{this.highlightMatches(e,t)}):this.highlightMatches(e,t),this.editable.dispatcher&&this.editable.dispatcher.notify("spellcheckUpdated",e)}highlightMatches(e,t){this.removeHighlights(e),t&&t.length>0&&gt.highlightMatches(e,t)}removeHighlights(e){e=Rn(e,this.win.document);for(let t of xt('[data-highlight="spellcheck"]',e))dt(t)}removeHighlightsAtCursor(e){e=Rn(e,this.win.document);let t=this.editable.getSelection(e);if(t&&t.isCursor){let n=t.range.startContainer;n.nodeType===3&&(n=n.parentNode);let i;do{if(n===e)return;if(n.getAttribute("data-highlight")==="spellcheck"){i=n.getAttribute("data-word-id");break}}while(n=n.parentNode);i&&t.retainVisibleSelection(()=>{for(let u of xt(`[data-word-id="${i}"]`,e))dt(u)})}}};function qt(){if(K.log===!1||!global.console)return;let r=arguments.length===1?arguments[0]:Array.from(arguments);return arguments.length!==1&&r[r.length-1]==="trace"&&(r.pop(),console.trace&&console.trace()),console.log(r)}function hi(r){let e=r.win.document;return{focus(t){On(t)&&t.appendChild(e.createTextNode("\uFEFF"))},blur(t){e.activeElement!==t&&Fn(t)},selection(t,n){qt(n?"Default selection behavior":"Default selection empty behavior")},cursor(t,n){qt(n?"Default cursor behavior":"Default cursor empty behavior")},newline(t,n){if(n.isAtTextEnd()){let i=e.createElement("br");n.insertBefore(i),(i.nextSibling?.nodeType!==3||i.nextSibling.textContent[0]!=="\uFEFF")&&n.insertAfter(e.createTextNode("\uFEFF"))}else n.insertBefore(e.createElement("br"));n.setVisibleSelection()},insert(t,n,i){let u=t.parentNode,p=t.cloneNode(!1);switch(p.id&&p.removeAttribute("id"),n){case"before":u.insertBefore(p,t),t.focus();break;case"after":u.insertBefore(p,t.nextSibling),p.focus();break}},split(t,n,i,u){let p=t.cloneNode(!1);for(p.appendChild(n),t.parentNode.insertBefore(p,t);t.firstChild;)t.removeChild(t.firstChild);t.appendChild(i),Vt(p),Vt(t),t.focus()},merge(t,n,i){let u,p;switch(n){case"before":u=Yn(t),p=t;break;case"after":u=t,p=Qn(t);break}u&&p&&(i=u.childNodes.length>0?r.appendTo(u,p.innerHTML):r.prependTo(u,p.innerHTML),p.remove(),i.save(),Vt(u),i.restore(),i.setVisibleSelection())},empty(t){qt("Default empty behavior")},switch(t,n,i){switch(n){case"before":let u=Yn(t);u&&(i.moveAtTextEnd(u),i.setVisibleSelection());break;case"after":let p=Qn(t);p&&(i.moveAtBeginning(p),i.setVisibleSelection());break}},move(t,n,i){qt("Default move behavior")},paste(t,n,i){if(n.length===0)return;if(i.insertBefore(n.shift()),n.length===0)return i.setVisibleSelection();let u=t.parentNode,p=t;n.forEach(o=>{let c=t.cloneNode(!1);c.id&&c.removeAttribute("id");let d=wt(o);c.appendChild(d),u.insertBefore(c,p.nextSibling),p=c}),r.createCursorAtEnd(p).setVisibleSelection()},clipboard(t,n,i){qt("Default clipboard behavior")},toggleBold(t){t.toggleBold()},toggleEmphasis(t){t.toggleEmphasis()}}}function pi(r){let e=hi(r);return{focus(t){e.focus(t)},blur(t){e.blur(t)},flow(t,n){e.flow(t,n)},selection(t,n){e.selection(t,n)},cursor(t,n){e.cursor(t,n)},newline(t,n){e.newline(t,n)},split(t,n,i,u){e.split(t,n,i,u)},insert(t,n,i){e.insert(t,n,i)},merge(t,n,i){e.merge(t,n,i)},empty(t){e.empty(t)},switch(t,n,i){e.switch(t,n,i)},move(t,n,i){e.move(t,n,i)},clipboard(t,n,i){e.clipboard(t,n,i)},paste(t,n,i){e.paste(t,n,i)},toggleBold(t){e.toggleBold(t)},toggleEmphasis(t){e.toggleEmphasis(t)}}}var Ds=st(ni());function Pr(r){return[...new Mt(r,"getNextTextNode")]}function hn({textNodes:r,absOffset:e}){let t=0,n=0,i;for(let u=0;u<r.length;u++){let p=r[u];if(e<=t+p.textContent.length){i=p,n=e-t;break}t+=p.textContent.length}return{node:i,relativeOffset:n}}function Bs(r){let e=Pr(r),t=(n,i)=>n+i.textContent.length;return e.reduce(t,0)}function Fs({host:r,requiredOnFirstLine:e,requiredOnLastLine:t,positionX:n}){let i=r.ownerDocument.createRange();i.selectNodeContents(r);let u=i.getBoundingClientRect(),p=Bs(r),o=Pr(r);if(p===0)return{wasFound:!1};let c={currentOffset:Math.floor(p/2),leftLimit:0,rightLimit:p},d=c.currentOffset,W,B=20;for(;c.leftLimit<c.rightLimit&&B>0;){B=B-=1,d=c.currentOffset;let Ee=Ls({textNodes:o,offset:c.currentOffset}).getBoundingClientRect();if(W=Math.abs(Ee.left-n),e&&u.top!==Ee.top){Ps(c);continue}else if(t&&u.bottom!==Ee.bottom){Is(c);continue}n<Ee.left?Ps(c):Is(c)}let I=Ls({textNodes:o,offset:c.currentOffset}).getBoundingClientRect(),F=Math.abs(I.left-n);return F<W&&(W=F,d=c.currentOffset),{distance:W,offset:d,wasFound:!0}}function Ps(r){r.rightLimit=r.currentOffset,r.currentOffset=Math.floor((r.currentOffset+r.leftLimit)/2)}function Is(r){r.leftLimit=r.currentOffset,r.currentOffset=Math.ceil((r.currentOffset+r.rightLimit)/2)}function Ls({textNodes:r,offset:e}){let{node:t,relativeOffset:n}=hn({textNodes:r,absOffset:e}),i=t.ownerDocument.createRange();return i.setStart(t,n),i.collapse(!0),i}var Wt=class{constructor(e){let t={window,defaultBehavior:!0,mouseMoveSelectionChanges:!1,browserSpellcheck:!0};this.config=Object.assign(t,e),this.win=this.config.window,this.editableSelector=`.${K.editableClass}`,Ir.default.initialized||Ir.default.init(),this.dispatcher=new wr(this),this.config.defaultBehavior===!0&&this.dispatcher.on(pi(this))}static getGlobalConfig(){return K}static globalConfig(e){Object.assign(K,e),ti(K)}add(e){return this.enable(e),this}remove(e){let t=xt(e,this.win.document);this.disable(t);for(let n of t)n.classList.remove(K.editableDisabledClass);return this}disable(e){let t=xt(e||`.${K.editableClass}`,this.win.document);for(let n of t)Ii(n);return this}enable(e,t){let n=this.config.browserSpellcheck,i=xt(e||`.${K.editableDisabledClass}`,this.win.document);for(let u of i)Pi(u,{normalize:t,shouldSpellcheck:n}),this.dispatcher.notify("init",u);return this}suspend(e){let t=xt(e||`.${K.editableClass}`,this.win.document);for(let n of t)n.removeAttribute("contenteditable");return this.dispatcher.suspend(),this}continue(e){let t=xt(e||`.${K.editableClass}`,this.win.document);for(let n of t)n.setAttribute("contenteditable",!0);return this.dispatcher.continue(),this}createCursor(e,t="beginning"){let n=Pe.findHost(e,this.editableSelector);if(!n)return;let i=Ir.default.createRange();return t==="beginning"||t==="end"?(i.selectNodeContents(e),i.collapse(t==="beginning")):e!==n?t==="before"?(i.setStartBefore(e),i.setEndBefore(e)):t==="after"&&(i.setStartAfter(e),i.setEndAfter(e)):ft("EditableJS: cannot create cursor outside of an editable block."),new Pe(n,i)}createCursorAtCharacterOffset({element:e,offset:t}){let n=Pr(e),{node:i,relativeOffset:u}=hn({textNodes:n,absOffset:t}),p=Ir.default.createRange();p.setStart(i,u),p.collapse(!0);let o=Pe.findHost(e,this.editableSelector),c=new Pe(o,p);return c.setVisibleSelection(),c}createCursorAtBeginning(e){return this.createCursor(e,"beginning")}createCursorAtEnd(e){return this.createCursor(e,"end")}createCursorBefore(e){return this.createCursor(e,"before")}createCursorAfter(e){return this.createCursor(e,"after")}getContent(e){return Ur(e)}appendTo(e,t){let n=Kt(e,this.win.document),i=this.createCursor(n,"end");return i.insertAfter(typeof t=="string"?wt(t):t),i}prependTo(e,t){let n=Kt(e,this.win.document),i=this.createCursor(n,"beginning");return i.insertBefore(typeof t=="string"?wt(t):t),i}getSelection(e){let t=this.dispatcher.selectionWatcher.getFreshSelection();if(!(e&&t))return t;let n=t.range;try{n.compareNode(e)!==n.NODE_BEFORE_AND_AFTER&&(t=void 0)}catch{t=void 0}return t}setupHighlighting(e){return this.highlighting=new Br(this,e),this}setupSpellcheck(e){let t;e.markerNode&&(t=e.markerNode.outerHTML),this.setupHighlighting({throttle:e.throttle,spellcheck:{marker:t,spellcheckService:e.spellcheckService}}),this.spellcheck={checkSpelling:n=>{this.highlighting.highlight(n)}}}highlight({editableHost:e,text:t,highlightId:n,textRange:i,raiseEvents:u,type:p="comment"}){return i?typeof i.start!="number"||typeof i.end!="number"?(ft("Error in Editable.highlight: You passed a textRange object with invalid keys. Expected shape: { start: Number, end: Number }"),-1):i.start===i.end?(ft("Error in Editable.highlight: You passed a textRange object with equal start and end offsets, which is considered a cursor and therefore unfit to create a highlight."),-1):at.highlightRange(e,t,n,i.start,i.end,u?this.dispatcher:void 0,p):at.highlightText(e,t,n,p)}getHighlightPositions({editableHost:e,type:t}){return at.extractHighlightedRanges(e,t)}removeHighlight({editableHost:e,highlightId:t,raiseEvents:n}){at.removeHighlight(e,t,n?this.dispatcher:void 0)}decorateHighlight({editableHost:e,highlightId:t,addCssClass:n,removeCssClass:i}){at.updateHighlight(e,t,n,i)}on(e,t){return this.dispatcher.on(e,t),this}off(...e){return this.dispatcher.off.apply(this.dispatcher,e),this}unload(){return this.dispatcher.unload(),this}findClosestCursorOffset({element:e,origCoordinates:t,requiredOnFirstLine:n=!1,requiredOnLastLine:i=!1}){let u=this.dispatcher.switchContext?this.dispatcher.switchContext.positionX:t.left;return Fs({host:e,requiredOnFirstLine:n,requiredOnLastLine:i,positionX:u})}};Wt.parser=_t;Wt.content=ht;Wt.browser=Ds.default;["focus","blur","flow","selection","cursor","newline","insert","split","merge","empty","change","switch","move","clipboard","paste","spellcheckUpdated","selectToBoundary"].forEach(r=>{Wt.prototype[r]=function(e){return this.on(r,e)}});var pn=new Wt({defaultBehavior:!1}),Yl=["focus","blur","selection","cursor","change","spellcheckUpdated","clipboard","insert","split","merge","switch","newline"];Yl.forEach(r=>{pn.on(r,(e,...t)=>{let n=new CustomEvent(`editable-${r}`,{detail:t});e.dispatchEvent(n)})});function Ws(r){r.directive("editable",(e,{expression:t},{cleanup:n,evaluateLater:i,effect:u})=>{pn.add(e);let p=i(t);u(()=>{p(o=>{if(document.activeElement===e)return;let c=o||"";e.innerHTML!==c&&(e.innerHTML=c)})}),n(()=>pn.remove(e))}),r.magic("editable",()=>pn)}document.addEventListener("alpine:init",()=>{window.Alpine.plugin(Ws)});})();
